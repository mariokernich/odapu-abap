sap.ui.define(["../../util/DialogController","sap/m/MessageToast","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(t,e,o,s,i){"use strict";function n(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}co+
nst r=n(t);const a=r.extend("de.kernich.odpu.controller.dialog.ProjectListDialogController",{constructor:function t(){r.prototype.constructor.apply(this,arguments);this.data={projects:[],selectedProject:null}},onSearch:function t(e){const o=e.getParamete+
r("newValue")?.toLowerCase()??"";const n=this.getElement("idProjectsList");const r=n.getBinding("items");if(r){r.filter(o?new s("ProjectName",i.Contains,o):[]);this.updateDialogTitle()}},onLoad:function t(){const o=this.getElement("idProjectsList");const+
 s=o.getSelectedItem();if(!s){e.show(this.getText("msg.selectProject"));return}const i=s.getBindingContext("dialog");if(!i){return}const n=i.getObject();this.data.selectedProject=n;this.onConfirm()},refresh:async function t(){this.dialog.setBusy(true);tr+
y{const t=await this.requests.getProjects();const e=this.dialog.getModel("dialog");e.setProperty("/projects",t);e.refresh(true)}finally{this.dialog.setBusy(false)}},onAfterOpen:function t(){r.prototype.onAfterOpen.call(this);this.updateDialogTitle()},onD+
elete:async function t(s){const i=s.getSource();const n=i.getCustomData();const r=n.find(t=>t.getKey()==="project");if(!r){return}const a=r.getValue();const c=await this.dialogManager.showConfirmationDialog(`Are you sure you want to delete project "${a.P+
rojectName}"?`);if(c){this.dialog.setBusy(true);try{await this.requests.deleteProject(a);e.show(this.getText("msg.projectDeleted"));await this.refresh();this.updateDialogTitle()}catch(t){const e=t instanceof Error?t.message:String(t);o.error(`Error delet+
ing project: ${e}`)}finally{this.dialog.setBusy(false)}}},updateDialogTitle:function t(){const e=this.getElement("idProjectsList");const o=e.getBinding("items");const s=o?o.getLength():0;const i=this.getText("dlg.title.savedProjects");this.dialog.setTitl+
e(`${i} (${s})`)}});return a});                                                                                                                                                                                                                                
//# sourceMappingURL=ProjectListDialogController.js.map                                                                                                                                                                                                        