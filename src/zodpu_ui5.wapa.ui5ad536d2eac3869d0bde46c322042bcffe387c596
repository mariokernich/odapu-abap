sap.ui.define(["sap/ui/core/Fragment", "sap/ui/model/json/JSONModel", "sap/ui/base/Object"], function (Fragment, JSONModel, BaseObject) {                                                                                                                      
  "use strict";                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
  /**                                                                                                                                                                                                                                                          
   * @namespace de.kernich.odpu.util                                                                                                                                                                                                                           
   */                                                                                                                                                                                                                                                          
  const DialogController = BaseObject.extend("de.kernich.odpu.util.DialogController", {                                                                                                                                                                        
    constructor: function constructor() {                                                                                                                                                                                                                      
      BaseObject.prototype.constructor.apply(this, arguments);                                                                                                                                                                                                 
      this.data = {};                                                                                                                                                                                                                                          
      this.dialogId = "";                                                                                                                                                                                                                                      
    },                                                                                                                                                                                                                                                         
    get dialog() {                                                                                                                                                                                                                                             
      return this._dialog;                                                                                                                                                                                                                                     
    },                                                                                                                                                                                                                                                         
    get dialogManager() {                                                                                                                                                                                                                                      
      return this._dialogManager;                                                                                                                                                                                                                              
    },                                                                                                                                                                                                                                                         
    set dialog(value) {                                                                                                                                                                                                                                        
      this._dialog = value;                                                                                                                                                                                                                                    
    },                                                                                                                                                                                                                                                         
    set dialogManager(value) {                                                                                                                                                                                                                                 
      this._dialogManager = value;                                                                                                                                                                                                                             
    },                                                                                                                                                                                                                                                         
    set requests(value) {                                                                                                                                                                                                                                      
      this._requests = value;                                                                                                                                                                                                                                  
    },                                                                                                                                                                                                                                                         
    get requests() {                                                                                                                                                                                                                                           
      return this._requests;                                                                                                                                                                                                                                   
    },                                                                                                                                                                                                                                                         
    init: async function _init(options) {                                                                                                                                                                                                                      
      return Promise.all([this.initDialog(options), this.initPromise()]);                                                                                                                                                                                      
    },                                                                                                                                                                                                                                                         
    setModel: function _setModel(model, modelName) {                                                                                                                                                                                                           
      this.dialog.setModel(model, modelName);                                                                                                                                                                                                                  
    },                                                                                                                                                                                                                                                         
    getModel: function _getModel(modelName) {                                                                                                                                                                                                                  
      return this.dialog?.getModel(modelName);                                                                                                                                                                                                                 
    },                                                                                                                                                                                                                                                         
    onInit: function _onInit() {},                                                                                                                                                                                                                             
    onAfterOpen: function _onAfterOpen() {},                                                                                                                                                                                                                   
    initDialog: async function _initDialog(options) {                                                                                                                                                                                                          
      let dialog = this.dialog;                                                                                                                                                                                                                                
      this.dialogId = options.id;                                                                                                                                                                                                                              
      if (!dialog) {                                                                                                                                                                                                                                           
        this.dialogName = options.name;                                                                                                                                                                                                                        
        dialog = await this.createDialogFromFragment({                                                                                                                                                                                                         
          path: options.path,                                                                                                                                                                                                                                  
          id: options.id,                                                                                                                                                                                                                                      
          controller: this                                                                                                                                                                                                                                     
        });                                                                                                                                                                                                                                                    
        this.dialog = dialog;                                                                                                                                                                                                                                  
        this.dialogManager = options.dialogManager;                                                                                                                                                                                                            
        this.requests = options.requests;                                                                                                                                                                                                                      
        this.bundle = options.bundle;                                                                                                                                                                                                                          
        const dialogModel = new JSONModel(this.data, true);                                                                                                                                                                                                    
        this.setModel(dialogModel, "dialog");                                                                                                                                                                                                                  
        dialog.setBusyIndicatorDelay(0);                                                                                                                                                                                                                       
      }                                                                                                                                                                                                                                                        
      return dialog;                                                                                                                                                                                                                                           
    },                                                                                                                                                                                                                                                         
    getElement: function _getElement(id) {                                                                                                                                                                                                                     
      const el = Fragment.byId(this.dialogId, id);                                                                                                                                                                                                             
      if (!el) {                                                                                                                                                                                                                                               
        throw new Error(`Element in dialog ${this.dialogId} w/ id ${id} not found`);                                                                                                                                                                           
      }                                                                                                                                                                                                                                                        
      return el;                                                                                                                                                                                                                                               
    },                                                                                                                                                                                                                                                         
    getText: function _getText(key) {                                                                                                                                                                                                                          
      return this.bundle.getText(key) ?? key;                                                                                                                                                                                                                  
    },                                                                                                                                                                                                                                                         
    createDialogFromFragment: async function _createDialogFromFragment(options) {                                                                                                                                                                              
      return await Fragment.load({                                                                                                                                                                                                                             
        name: options.path,                                                                                                                                                                                                                                    
        controller: options.controller,                                                                                                                                                                                                                        
        id: options.id                                                                                                                                                                                                                                         
      });                                                                                                                                                                                                                                                      
    },                                                                                                                                                                                                                                                         
    initPromise: async function _initPromise() {                                                                                                                                                                                                               
      this.promiseHelper = await this.createPromise();                                                                                                                                                                                                         
      return this.promiseHelper;                                                                                                                                                                                                                               
    },                                                                                                                                                                                                                                                         
    createPromise: async function _createPromise() {                                                                                                                                                                                                           
      let resolve;                                                                                                                                                                                                                                             
      let reject;                                                                                                                                                                                                                                              
      const promise = new Promise((s, e) => {                                                                                                                                                                                                                  
        resolve = s;                                                                                                                                                                                                                                           
        reject = e;                                                                                                                                                                                                                                            
      });                                                                                                                                                                                                                                                      
      return new Promise(res => {                                                                                                                                                                                                                              
        res({                                                                                                                                                                                                                                                  
          promise: promise,                                                                                                                                                                                                                                    
          reject: reject,                                                                                                                                                                                                                                      
          resolve: resolve                                                                                                                                                                                                                                     
        });                                                                                                                                                                                                                                                    
      });                                                                                                                                                                                                                                                      
    },                                                                                                                                                                                                                                                         
    onConfirm: function _onConfirm() {                                                                                                                                                                                                                         
      this.resolve();                                                                                                                                                                                                                                          
      if (this.dialog) {                                                                                                                                                                                                                                       
        this.dialog.close();                                                                                                                                                                                                                                   
        this.dialog.destroy();                                                                                                                                                                                                                                 
      }                                                                                                                                                                                                                                                        
    },                                                                                                                                                                                                                                                         
    onCancel: function _onCancel() {                                                                                                                                                                                                                           
      this.reject();                                                                                                                                                                                                                                           
      if (this.dialog) {                                                                                                                                                                                                                                       
        this.dialog.close();                                                                                                                                                                                                                                   
        this.dialog.destroy();                                                                                                                                                                                                                                 
      }                                                                                                                                                                                                                                                        
    },                                                                                                                                                                                                                                                         
    resolve: function _resolve(data) {                                                                                                                                                                                                                         
      this.promiseHelper?.resolve(data || this.data);                                                                                                                                                                                                          
    },                                                                                                                                                                                                                                                         
    reject: function _reject(reason) {                                                                                                                                                                                                                         
      this.promiseHelper?.reject(reason || "Cancelled");                                                                                                                                                                                                       
    },                                                                                                                                                                                                                                                         
    destroy: function _destroy() {                                                                                                                                                                                                                             
      BaseObject.prototype.destroy.call(this);                                                                                                                                                                                                                 
      this.dialog?.destroy();                                                                                                                                                                                                                                  
      this.promiseHelper?.reject("destroy routine");                                                                                                                                                                                                           
    }                                                                                                                                                                                                                                                          
  });                                                                                                                                                                                                                                                          
  DialogController.DialogController = DialogController;                                                                                                                                                                                                        
  return DialogController;                                                                                                                                                                                                                                     
});                                                                                                                                                                                                                                                            
//# sourceMappingURL=DialogController-dbg.js.map                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               