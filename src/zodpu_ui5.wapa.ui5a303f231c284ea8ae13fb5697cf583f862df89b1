sap.ui.define(["sap/ui/base/ManagedObject", "../Constants"], function (ManagedObject, __Constants) {                                                                                                                                                           
  "use strict";                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
  function _interopRequireDefault(obj) {                                                                                                                                                                                                                       
    return obj && obj.__esModule && typeof obj.default !== "undefined" ? obj.default : obj;                                                                                                                                                                    
  }                                                                                                                                                                                                                                                            
  const Constants = _interopRequireDefault(__Constants);                                                                                                                                                                                                       
  /**                                                                                                                                                                                                                                                          
   * @namespace de.kernich.odpu.util                                                                                                                                                                                                                           
   */                                                                                                                                                                                                                                                          
  const ODataRequests = ManagedObject.extend("de.kernich.odpu.util.ODataRequests", {                                                                                                                                                                           
    constructor: function _constructor(model) {                                                                                                                                                                                                                
      ManagedObject.prototype.constructor.call(this);                                                                                                                                                                                                          
      this.model = model;                                                                                                                                                                                                                                      
    },                                                                                                                                                                                                                                                         
    getModel: function _getModel() {                                                                                                                                                                                                                           
      return this.model;                                                                                                                                                                                                                                       
    },                                                                                                                                                                                                                                                         
    getServices: async function _getServices(options = {                                                                                                                                                                                                       
      refresh: false                                                                                                                                                                                                                                           
    }) {                                                                                                                                                                                                                                                       
      if (!options.refresh) {                                                                                                                                                                                                                                  
        const cachedServices = ODataRequests.getCachedServices();                                                                                                                                                                                              
        if (cachedServices) {                                                                                                                                                                                                                                  
          return cachedServices;                                                                                                                                                                                                                               
        }                                                                                                                                                                                                                                                      
      }                                                                                                                                                                                                                                                        
      return new Promise((resolve, reject) => {                                                                                                                                                                                                                
        this.model.read("/ODataService", {                                                                                                                                                                                                                     
          success: data => {                                                                                                                                                                                                                                   
            ODataRequests.setCachedServices(data.results);                                                                                                                                                                                                     
            resolve(data.results);                                                                                                                                                                                                                             
          },                                                                                                                                                                                                                                                   
          error: reject,                                                                                                                                                                                                                                       
          urlParameters: {                                                                                                                                                                                                                                     
            $top: Constants.SERVICE_QUERY_LIMIT.toString()                                                                                                                                                                                                     
          }                                                                                                                                                                                                                                                    
        });                                                                                                                                                                                                                                                    
      });                                                                                                                                                                                                                                                      
    },                                                                                                                                                                                                                                                         
    getInfo: async function _getInfo() {                                                                                                                                                                                                                       
      return new Promise((resolve, reject) => {                                                                                                                                                                                                                
        this.model.read("/Info", {                                                                                                                                                                                                                             
          success: data => {                                                                                                                                                                                                                                   
            resolve(data.results[0]);                                                                                                                                                                                                                          
          },                                                                                                                                                                                                                                                   
          error: reject                                                                                                                                                                                                                                        
        });                                                                                                                                                                                                                                                    
      });                                                                                                                                                                                                                                                      
    },                                                                                                                                                                                                                                                         
    getPushChannels: async function _getPushChannels() {                                                                                                                                                                                                       
      return new Promise((resolve, reject) => {                                                                                                                                                                                                                
        this.model.read("/PushChannel", {                                                                                                                                                                                                                      
          success: data => {                                                                                                                                                                                                                                   
            resolve(data.results);                                                                                                                                                                                                                             
          },                                                                                                                                                                                                                                                   
          error: reject,                                                                                                                                                                                                                                       
          urlParameters: {                                                                                                                                                                                                                                     
            $top: Constants.SERVICE_QUERY_LIMIT.toString()                                                                                                                                                                                                     
          }                                                                                                                                                                                                                                                    
        });                                                                                                                                                                                                                                                    
      });                                                                                                                                                                                                                                                      
    },                                                                                                                                                                                                                                                         
    getProjects: async function _getProjects() {                                                                                                                                                                                                               
      return new Promise((resolve, reject) => {                                                                                                                                                                                                                
        this.model.read("/ODataServiceProject", {                                                                                                                                                                                                              
          success: data => {                                                                                                                                                                                                                                   
            resolve(data.results);                                                                                                                                                                                                                             
          },                                                                                                                                                                                                                                                   
          error: reject                                                                                                                                                                                                                                        
        });                                                                                                                                                                                                                                                    
      });                                                                                                                                                                                                                                                      
    },                                                                                                                                                                                                                                                         
    createProject: async function _createProject(project) {                                                                                                                                                                                                    
      return new Promise((resolve, reject) => {                                                                                                                                                                                                                
        this.model.create("/ODataServiceProject", project, {                                                                                                                                                                                                   
          success: () => resolve(),                                                                                                                                                                                                                            
          error: reject                                                                                                                                                                                                                                        
        });                                                                                                                                                                                                                                                    
      });                                                                                                                                                                                                                                                      
    },                                                                                                                                                                                                                                                         
    deleteProject: async function _deleteProject(project) {                                                                                                                                                                                                    
      return new Promise((resolve, reject) => {                                                                                                                                                                                                                
        const sPath = this.model.createKey("/ODataServiceProject", {                                                                                                                                                                                           
          ProjectName: project.ProjectName                                                                                                                                                                                                                     
        });                                                                                                                                                                                                                                                    
        this.model.remove(sPath, {                                                                                                                                                                                                                             
          success: () => resolve(),                                                                                                                                                                                                                            
          error: reject                                                                                                                                                                                                                                        
        });                                                                                                                                                                                                                                                    
      });                                                                                                                                                                                                                                                      
    },                                                                                                                                                                                                                                                         
    markAsFavorite: async function _markAsFavorite(options) {                                                                                                                                                                                                  
      return new Promise((resolve, reject) => {                                                                                                                                                                                                                
        this.model.callFunction("/mark_favorite", {                                                                                                                                                                                                            
          success: () => resolve(),                                                                                                                                                                                                                            
          error: reject,                                                                                                                                                                                                                                       
          urlParameters: {                                                                                                                                                                                                                                     
            ProjectName: "",                                                                                                                                                                                                                                   
            ServicePath: options.servicePath,                                                                                                                                                                                                                  
            Value: options.isFavorite                                                                                                                                                                                                                          
          },                                                                                                                                                                                                                                                   
          method: "POST"                                                                                                                                                                                                                                       
        });                                                                                                                                                                                                                                                    
      });                                                                                                                                                                                                                                                      
    }                                                                                                                                                                                                                                                          
  });                                                                                                                                                                                                                                                          
  ODataRequests.CACHE_KEY = "odpu_cached_services";                                                                                                                                                                                                            
  ODataRequests.getCachedServices = function getCachedServices() {                                                                                                                                                                                             
    const cachedData = localStorage.getItem(ODataRequests.CACHE_KEY);                                                                                                                                                                                          
    if (!cachedData) {                                                                                                                                                                                                                                         
      return null;                                                                                                                                                                                                                                             
    }                                                                                                                                                                                                                                                          
    try {                                                                                                                                                                                                                                                      
      return JSON.parse(cachedData);                                                                                                                                                                                                                           
    } catch {                                                                                                                                                                                                                                                  
      return null;                                                                                                                                                                                                                                             
    }                                                                                                                                                                                                                                                          
  };                                                                                                                                                                                                                                                           
  ODataRequests.setCachedServices = function setCachedServices(services) {                                                                                                                                                                                     
    localStorage.setItem(ODataRequests.CACHE_KEY, JSON.stringify(services));                                                                                                                                                                                   
  };                                                                                                                                                                                                                                                           
  return ODataRequests;                                                                                                                                                                                                                                        
});                                                                                                                                                                                                                                                            
//# sourceMappingURL=ODataRequests-dbg.js.map                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               