{"version":3,"file":"ProjectListDialogController.js","names":["DialogController","_interopRequireDefault","__DialogController","ProjectListDialogController","extend","constructor","prototype","apply","this","arguments","data","projects","selectedProject"+
,"onSearch","_onSearch","event","query","getParameter","toLowerCase","list","getElement","binding","getBinding","filter","Filter","FilterOperator","Contains","updateDialogTitle","onLoad","_onLoad","selectedItem","getSelectedItem","MessageToast","show","g+
etText","bindingContext","getBindingContext","project","getObject","onConfirm","refresh","async","_refresh","dialog","setBusy","requests","getProjects","model","getModel","setProperty","onAfterOpen","_onAfterOpen","DialogController.prototype.onAfterOpen.+
call","onDelete","_onDelete","source","getSource","customData","getCustomData","projectData","find","getKey","getValue","confirmed","dialogManager","showConfirmationDialog","ProjectName","deleteProject","error","errorMessage","Error","message","String","+
MessageBox","_updateDialogTitle","filteredLength","getLength","title","setTitle"],"sources":["ProjectListDialogController.ts"],"sourcesContent":["import DialogController from \"../../util/DialogController\";\nimport MessageToast from \"sap/m/MessageToast+
\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport List from \"sap/m/List\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport { Project } from \"../../Types\";\nimport ListBinding fr+
om \"sap/ui/model/ListBinding\";\nimport { Button$PressEvent } from \"sap/m/Button\";\nimport { SearchField$LiveChangeEvent } from \"sap/m/SearchField\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\n/**\n * @namespace de.kernich.odpu.contro+
ller.dialog\n */\nexport default class ProjectListDialogController extends DialogController {\n\tdata = {\n\t\tprojects: [] as Project[],\n\t\tselectedProject: null as Project | null,\n\t};\n\n\tpublic onSearch(event: SearchField$LiveChangeEvent): void {+
\n\t\tconst query = event.getParameter(\"newValue\")?.toLowerCase() ?? \"\";\n\t\tconst list = this.getElement<List>(\"idProjectsList\");\n\t\tconst binding = list.getBinding(\"items\") as ListBinding;\n\n\t\tif (binding) {\n\t\t\tbinding.filter(\n\t\t\t+
\tquery ? new Filter(\"ProjectName\", FilterOperator.Contains, query) : []\n\t\t\t);\n\t\t\tthis.updateDialogTitle();\n\t\t}\n\t}\n\n\tpublic onLoad(): void {\n\t\tconst list = this.getElement<List>(\"idProjectsList\");\n\t\tconst selectedItem = list.get+
SelectedItem();\n\n\t\tif (!selectedItem) {\n\t\t\tMessageToast.show(this.getText(\"msg.selectProject\"));\n\t\t\treturn;\n\t\t}\n\n\t\tconst bindingContext = selectedItem.getBindingContext(\"dialog\");\n\t\tif (!bindingContext) {\n\t\t\treturn;\n\t\t}\n+
\n\t\tconst project = bindingContext.getObject() as Project;\n\t\tthis.data.selectedProject = project;\n\t\tthis.onConfirm();\n\t}\n\n\tpublic async refresh() {\n\t\tthis.dialog.setBusy(true);\n\t\ttry {\n\t\t\tconst projects = await this.requests.getPro+
jects();\n\t\t\tconst model = this.dialog.getModel(\"dialog\") as JSONModel;\n\t\t\tmodel.setProperty(\"/projects\", projects);\n\t\t\tmodel.refresh(true);\n\t\t} finally {\n\t\t\tthis.dialog.setBusy(false);\n\t\t}\n\t}\n\n\tpublic onAfterOpen(): void {\+
n\t\tsuper.onAfterOpen();\n\t\tthis.updateDialogTitle();\n\t}\n\n\tpublic async onDelete(event: Button$PressEvent): Promise<void> {\n\t\tconst source = event.getSource();\n\n\t\t// Get project data from custom data\n\t\tconst customData = source.getCusto+
mData();\n\t\tconst projectData = customData.find((data) => data.getKey() === \"project\");\n\n\t\tif (!projectData) {\n\t\t\tconsole.error(\"Could not find project data in custom data\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst project = projectData.getValue+
() as Project;\n\t\tconst confirmed = await this.dialogManager.showConfirmationDialog(\n\t\t\t`Are you sure you want to delete project \"${project.ProjectName}\"?`\n\t\t);\n\n\t\tif (confirmed) {\n\t\t\tthis.dialog.setBusy(true);\n\t\t\ttry {\n\t\t\t\taw+
ait this.requests.deleteProject(project);\n\t\t\t\tMessageToast.show(this.getText(\"msg.projectDeleted\"));\n\n\t\t\t\tawait this.refresh();\n\n\t\t\t\tthis.updateDialogTitle();\n\t\t\t} catch (error: unknown) {\n\t\t\t\tconst errorMessage =\n\t\t\t\t\te+
rror instanceof Error ? error.message : String(error);\n\t\t\t\tMessageBox.error(`Error deleting project: ${errorMessage}`);\n\t\t\t} finally {\n\t\t\t\tthis.dialog.setBusy(false);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate updateDialogTitle(): void {\n\t\tconst +
list = this.getElement<List>(\"idProjectsList\");\n\t\tconst binding = list.getBinding(\"items\") as ListBinding;\n\t\tconst filteredLength = binding ? binding.getLength() : 0;\n\t\tconst title = this.getText(\"dlg.title.savedProjects\");\n\t\tthis.dialo+
g.setTitle(`${title} (${filteredLength})`);\n\t}\n}\n"],"mappings":"kQAAOA,EAAgBC,EAAAC,GAYvB,MAGqBC,EAAoCH,EAAgBI,OAAA,iEAAAC,YAAA,SAAAA,IAAAL,EAAAM,UAAAD,YAAAE,MAAAC,KAAAC,WAAAD,KACxEE,KAAO,CACNC,SAAU,GACVC,gBAAiB,KACjB,EAEMC,SAAQ,SAAAC,EAACC,GACf,MAAM+
C,EAAQD,EAAME,aAAa,aAAaC,eAAiB,GAC/D,MAAMC,EAAOX,KAAKY,WAAiB,kBACnC,MAAMC,EAAUF,EAAKG,WAAW,SAEhC,GAAID,EAAS,CACZA,EAAQE,OACPP,EAAQ,IAAIQ,EAAO,cAAeC,EAAeC,SAAUV,GAAS,IAErER,KAAKmB,mBACN,CACD,EAEOC,OAAM,SAAAC,IACZ,MAAMV,EAAOX,KAAKY,WAAiB,kBACnC,MAAMU,EAAeX+
,EAAKY,kBAE1B,IAAKD,EAAc,CAClBE,EAAaC,KAAKzB,KAAK0B,QAAQ,sBAC/B,MACD,CAEA,MAAMC,EAAiBL,EAAaM,kBAAkB,UACtD,IAAKD,EAAgB,CACpB,MACD,CAEA,MAAME,EAAUF,EAAeG,YAC/B9B,KAAKE,KAAKE,gBAAkByB,EAC5B7B,KAAK+B,WACN,EAEaC,QAAOC,eAAAC,IACnBlC,KAAKmC,OAAOC,QAAQ,MACpB,IAC+
C,MAAMjC,QAAiBH,KAAKqC,SAASC,cACrC,MAAMC,EAAQvC,KAAKmC,OAAOK,SAAS,UACnCD,EAAME,YAAY,YAAatC,GAC/BoC,EAAMP,QAAQ,KACf,CAAC,QACAhC,KAAKmC,OAAOC,QAAQ,MACrB,CACD,EAEOM,YAAW,SAAAC,IACjBC,6BAAA5C,MACAA,KAAKmB,mBACN,EAEa0B,SAAQZ,eAAAa,EAACvC,GACrB,MAAMwC,EAASxC,E+
AAMyC,YAGrB,MAAMC,EAAaF,EAAOG,gBAC1B,MAAMC,EAAcF,EAAWG,KAAMlD,GAASA,EAAKmD,WAAa,WAEhE,IAAKF,EAAa,CAEjB,MACD,CAEA,MAAMtB,EAAUsB,EAAYG,WAC5B,MAAMC,QAAkBvD,KAAKwD,cAAcC,uBAC1C,4CAA4C5B,EAAQ6B,iBAGrD,GAAIH,EAAW,CACdvD,KAAKmC,OAAOC,QAAQ,MACpB,UACOpC,KAAKqC,SA+
ASsB,cAAc9B,GAClCL,EAAaC,KAAKzB,KAAK0B,QAAQ,6BAEzB1B,KAAKgC,UAEXhC,KAAKmB,mBACN,CAAE,MAAOyC,GACR,MAAMC,EACLD,aAAiBE,MAAQF,EAAMG,QAAUC,OAAOJ,GACjDK,EAAWL,MAAM,2BAA2BC,IAC7C,CAAC,QACA7D,KAAKmC,OAAOC,QAAQ,MACrB,CACD,CACD,EAEQjB,kBAAiB,SAAA+C,IACxB,MAAMvD,EA+
AOX,KAAKY,WAAiB,kBACnC,MAAMC,EAAUF,EAAKG,WAAW,SAChC,MAAMqD,EAAiBtD,EAAUA,EAAQuD,YAAc,EACvD,MAAMC,EAAQrE,KAAK0B,QAAQ,2BAC3B1B,KAAKmC,OAAOmC,SAAS,GAAGD,MAAUF,KACnC,IAAC,OAjGmBxE,CAA2B","ignoreList":[]}                                                        