sap.ui.define(["sap/m/Column","sap/m/Dialog","sap/m/Label","sap/ui/base/ManagedObject","sap/ui/model/json/JSONModel","sap/m/Table","sap/m/ColumnListItem","sap/m/Button","sap/m/MessageToast","sap/m/Text","sap/m/SearchField","sap/ui/core/Item","sap/m/Toolb+
arSpacer","sap/m/Toolbar","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/m/Select","sap/m/VBox","sap/m/Input","sap/m/GenericTile","sap/ui/layout/cssgrid/CSSGrid","sap/m/SegmentedButtonItem","sap/m/SegmentedButton","./Util","sap/ui/codeeditor/Co+
deEditor","sap/ui/core/Icon","sap/m/TileContent","sap/m/HBox","sap/m/MessageBox","./ODataRequests","sap/m/Image","sap/m/Link","sap/m/FormattedText","sap/m/MessageStrip"],function(e,t,n,s,o,a,i,r,c,l,d,p,w,u,m,h,g,y,x,S,C,f,v,B,P,b,T,E,k,M,D,j,A,U){"use s+
trict";function L(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const I=L(B);const G=L(M);const V=s.extend("de.kernich.odpu.util.DialogManager",{constructor:function e(t){s.prototype.constructor.call(this);this.component=t;this.re+
quests=new G(t.getModel())},pickApc:async function s(p){const g=new t({title:`Select Push Channel (${p.length})`,contentWidth:"80%",contentHeight:"80%"});g.setModel(new o(p),"apc");const y=()=>{const e=C.getBinding("items");const t=e?e.getLength():0;g.se+
tTitle(`Select Push Channel (${t})`)};const x=new d({placeholder:"Search Push Channels",liveChange:e=>{const t=e.getParameter("newValue")?.toLowerCase()??"";const n=C.getBinding("items");n.filter(t?new h({filters:[new h("ApplicationId",m.Contains,t),new +
h("Path",m.Contains,t)],and:false}):[]);y()}});const S=new u({content:[x,new w]});g.addContent(S);const C=new a({columns:[new e({header:new n({text:"Application ID"})}),new e({header:new n({text:"Path"})}),new e({header:new n({text:"Description"})}),new +
e({header:new n({text:"protocol_type_id"})}),new e({header:new n({text:"amc_message_type_id"})})],growing:true,growingThreshold:100});C.setMode("SingleSelectMaster");C.bindItems({path:"apc>/",template:new i({cells:[new l({text:"{apc>ApplicationId}"}),new+
 l({text:"{apc>Path}"}),new l({text:"{apc>Description}"}),new l({text:"{apc>ProtocolTypeId}"}),new l({text:"{apc>AmcMessageTypeId}"})]})});g.addContent(C);return new Promise((e,t)=>{g.addButton(new r({text:"Choose",press:()=>{const t=C.getSelectedItem();+
if(!t){c.show("Please select a push channel.");return}const n=t.getBindingContext("apc");const s=n.getObject();e(s);g.close();g.destroy()},type:"Emphasized",icon:"sap-icon://accept"}));g.addButton(new r({text:"Cancel",press:()=>{t(new Error("Dialog close+
d"));g.close();g.destroy()},type:"Ghost",icon:"sap-icon://decline"}));g.open()})},pickService:async function s(){let y=[];const x=new o(y);const S=new t({title:`Select Service`,contentWidth:"80%",contentHeight:"80%",busyIndicatorDelay:0,draggable:true});+
const C=()=>{const e=f.getBinding("items");const t=e?e.getLength():0;S.setTitle(`Select Service (${t})`)};const f=new a({growingThreshold:9999,columns:[new e({header:new n({text:"Service Name / Group ID"})}),new e({header:new n({text:"Service Path"})}),n+
ew e({header:new n({text:"Description"})}),new e({header:new n({text:"OData Type"}),width:"100px"}),new e({header:new n({text:"Version"}),width:"100px"})],growing:true,mode:"SingleSelectMaster"});f.bindItems({path:"services>/",template:new i({cells:[new +
l({text:"{services>ServiceName}{services>GroupId}"}),new l({text:"{services>ServicePath}"}),new l({text:"{services>Description}"}),new l({text:"{services>ODataType}"}),new l({text:"{services>Version}"})]})});let v="";let B="ALL";const P=()=>{const e=f.ge+
tBinding("items");const t=[];if(v){t.push(new h({filters:[new h("ServiceName",m.Contains,v),new h("ServicePath",m.Contains,v)]}))}if(B!=="ALL"){t.push(new h("ODataType",m.EQ,B))}e.filter(t.length>0?new h({filters:t,and:true}):[]);C()};const b=new d({plac+
eholder:"Search Services",liveChange:e=>{v=e.getParameter("newValue")?.toLowerCase()??"";P()}});const T=new g({items:[new p({key:"ALL",text:"All"}),new p({key:"2",text:"2"}),new p({key:"4",text:"4"})],change:e=>{B=e.getParameter("selectedItem")?.getKey()+
??"ALL";P()}});const E=async()=>{S.setBusy(true);try{y=await this.requests.getServices();x.setProperty("/",y);S.setTitle(`Select Service (${y.length})`);c.show("Services refreshed")}finally{S.setBusy(false)}};const k=new u({content:[b,new w,T,new r({pres+
s:()=>{void E()},type:"Ghost",tooltip:"Refresh Services",icon:"sap-icon://refresh"})]}).addStyleClass("sapUiResponsivePadding");S.addContent(k);S.addContent(f);S.setModel(x,"services");S.open();S.setBusy(true);y=await this.requests.getServices();x.setPro+
perty("/",y);S.setTitle(`Select Service (${y.length})`);S.setBusy(false);return new Promise((e,t)=>{const n=async()=>{const t=await this.pickCustomService();e(t);S.close();S.destroy()};S.addButton(new r({text:"Choose",press:()=>{const t=f.getSelectedItem+
();if(!t){c.show("Please select a service.");return}const n=t.getBindingContext("services");const s=n.getObject();e(s);S.close();S.destroy()},type:"Emphasized",icon:"sap-icon://accept"}));S.addButton(new r({text:"Use Custom Service",press:()=>{void n()},+
type:"Ghost",icon:"sap-icon://add-document"}));S.addButton(new r({text:"Cancel",press:()=>{t(new Error("Dialog closed"));S.close();S.destroy()},type:"Ghost",icon:"sap-icon://decline"}))})},pickCustomService:async function e(){return new Promise((e,n)=>{c+
onst s=new t({title:"Select Custom Service",draggable:true,contentWidth:"500px"});const o=new v({items:[new f({text:"OData V2",key:"2"}),new f({text:"OData V4",key:"4"})],width:"100%"});const a=new x({placeholder:"Enter service path",width:"100%"});const+
 i=new r({text:"Save",type:"Emphasized",icon:"sap-icon://accept",press:()=>{const t=a.getValue();if(!t||t.trim().length===0){c.show("Please enter a service path");return}e({ServicePath:t.trim(),ODataType:o.getSelectedKey(),Version:"",ServiceName:"Custom +
Service"});s.close();s.destroy()}});const l=new r({text:"Cancel",type:"Ghost",icon:"sap-icon://decline",press:()=>{s.close();s.destroy();n(new Error("Dialog closed"))}});s.addContent(new y({items:[o,a,new E({items:[i,l]})]}).addStyleClass("sapUiSmallMarg+
in"));s.setBeginButton(i);s.setEndButton(l);s.setInitialFocus(a);s.open()})},showAddHeaderDialog:async function e(){return new Promise((e,s)=>{const o=new v({items:[new f({text:"Custom Header",key:"custom"}),new f({text:"Pre defined",key:"predefined"})],+
width:"100%",selectionChange:()=>{if(o.getSelectedKey()==="custom"){w.setVisible(true);a.setVisible(false)}else{w.setVisible(false);a.setVisible(true)}}}).addStyleClass("sapUiSmallMarginBottom");const a=new g({width:"100%",visible:false});const i=[{key:"+
sap-client",value:"100"},{key:"sap-language",value:"EN"},{key:"accept",value:"application/json"},{key:"content-type",value:"application/json"},{key:"x-csrf-token",value:"fetch"}];i.forEach(e=>{a.addItem(new p({key:e.key,text:e.key}))});const l=()=>{let t+
="";const n=d.getValue();switch(o.getSelectedKey()){case"custom":t=w.getValue();break;case"predefined":t=a.getSelectedKey();break}if(!t){c.show("Please enter a key.");return}if(!n){c.show("Please enter a value.");return}u.close();u.destroy();e({key:t,val+
ue:n})};const d=new x({placeholder:"Enter value",submit:l,width:"100%"});const w=new x({placeholder:"Enter key",submit:l,width:"100%"});const u=new t({title:"Add Header",contentWidth:"400px",draggable:true,content:[new y({items:[o,new n({text:"Key"}),w,a+
,new n({text:"Value"}).addStyleClass("sapUiSmallMarginTop"),d]}).addStyleClass("sapUiSmallMargin")]});u.setBeginButton(new r({text:"Save",press:l,type:"Emphasized",icon:"sap-icon://accept"}));u.setEndButton(new r({text:"Cancel",press:()=>{u.close();u.des+
troy();s(new Error("Dialog closed"))},type:"Ghost",icon:"sap-icon://decline"}));u.open()})},addFilter:async function e(s){return new Promise((e,o)=>{const a=()=>{d.close();d.destroy();e({property:i.getSelectedKey(),operator:c.getSelectedKey(),value:l.get+
Value()})};const i=new g({items:s.filter(e=>e.name.toLowerCase()!=="delete_mc"&&e.name.toLowerCase()!=="update_mc"&&e.name.toLowerCase()!=="create_mc").map(e=>new p({key:e.name,text:e.name})),width:"100%"});const c=new g({items:[new p({key:m.Contains,tex+
t:"Contains"}),new p({key:m.NotContains,text:"Does Not Contain"}),new p({key:m.StartsWith,text:"Starts With"}),new p({key:m.EndsWith,text:"Ends With"}),new p({key:m.NotStartsWith,text:"Does Not Start With"}),new p({key:m.NotEndsWith,text:"Does Not End Wi+
th"}),new p({key:m.EQ,text:"Equal"}),new p({key:m.NE,text:"Not Equal"}),new p({key:m.GT,text:"Greater Than"}),new p({key:m.LT,text:"Less Than"}),new p({key:m.GE,text:"Greater Than or Equal"}),new p({key:m.LE,text:"Less Than or Equal"})],width:"100%"});co+
nst l=new x({placeholder:"Enter value",submit:a,width:"100%"});const d=new t({title:"Add Filter",contentWidth:"400px",draggable:true,initialFocus:i,content:[new y({items:[new n({text:"Property"}),i,new n({text:"Operator"}),c,new n({text:"Value"}),l]}).ad+
dStyleClass("sapUiSmallMargin")]});d.setBeginButton(new r({text:"Save",press:a,type:"Emphasized",icon:"sap-icon://accept"}));d.setEndButton(new r({text:"Cancel",press:()=>{d.close();d.destroy();o(new Error("Dialog closed"))},type:"Ghost",icon:"sap-icon:/+
/decline"}));d.open()})},editFilter:async function e(s,o){return new Promise((e,a)=>{const i=()=>{w.close();w.destroy();e({property:c.getSelectedKey(),operator:l.getSelectedKey(),value:d.getValue()})};const c=new g({items:o.filter(e=>e.name.toLowerCase()+
!=="delete_mc"&&e.name.toLowerCase()!=="update_mc"&&e.name.toLowerCase()!=="create_mc").map(e=>new p({key:e.name,text:e.name})),width:"100%"});const l=new g({items:[new p({key:m.Contains,text:"Contains"}),new p({key:m.EQ,text:"Equal"}),new p({key:m.NE,te+
xt:"Not Equal"}),new p({key:m.GT,text:"Greater Than"}),new p({key:m.LT,text:"Less Than"})],width:"100%"});const d=new x({placeholder:"Enter value",submit:i,width:"100%"});d.setValue(s.value);c.setSelectedKey(s.property);l.setSelectedKey(s.operator);const+
 w=new t({title:"Edit Filter",contentWidth:"400px",draggable:true,initialFocus:c,content:[new y({items:[new n({text:"Property"}),c,new n({text:"Operator"}),l,new n({text:"Value"}),d]}).addStyleClass("sapUiSmallMargin")]});w.setBeginButton(new r({text:"Sa+
ve",press:i,type:"Emphasized",icon:"sap-icon://accept"}));w.setEndButton(new r({text:"Cancel",press:()=>{w.close();w.destroy();a(new Error("Dialog closed"))},type:"Ghost",icon:"sap-icon://decline"}));w.open()})},showUpdateAvailableDialog:function e(){con+
st n=this.component.getModel("info");const s=n.getData();const o=new t({title:"Update Available",contentWidth:"400px",draggable:true,content:new y({items:[new y({items:[new l({text:"A new version is available!",wrapping:true}).addStyleClass("sapThemeFont+
SizeLarge"),new l({text:"Current Version: "+s.Version,wrapping:true}).addStyleClass("sapUiTinyMarginTop"),new l({text:"Latest Version: "+s.RemoteVersion,wrapping:true}).addStyleClass("sapUiTinyMarginTop")],alignItems:"Center"}).addStyleClass("sapUiSmallM+
arginBottom"),new A({htmlText:s.LatestReleaseBody||"No release notes available."}).addStyleClass("sapUiTinyMarginBegin sapUiTinyMarginEnd")],alignItems:"Center"}).addStyleClass("sapUiSmallMargin")});o.setBeginButton(new r({text:"Get Update",press:()=>{wi+
ndow.open("https://github.com/mariokernich/odapu-abap/releases/latest","_blank")},type:"Emphasized",icon:"sap-icon://chain-link"}));o.setEndButton(new r({text:"Close",press:()=>{o.close();o.destroy()},type:"Ghost",icon:"sap-icon://decline"}));o.setInitia+
lFocus(o.getBeginButton());o.open()},showAboutDialog:function e(){const n=this.component.getModel("info");const s=n.getData();const o=new y({items:[new D({src:sap.ui.require.toUrl("de/kernich/odpu/img/odapu-logo.png"),width:"200px",height:"auto",decorati+
ve:false,alt:"ODAPU Logo"}),new l({text:"ODATA & APC Test Tool"}).addStyleClass("sapUiTinyMarginTop sapThemeFontSizeLarge"),new l({text:"Installed Version: "+s.Version}).addStyleClass("sapUiTinyMarginTop sapThemeFontSizeSmall")],alignItems:"Center"});if(+
s.RemoteVersion&&s.UpdateAvailable){o.addItem(new U({text:"Update available! Download the latest version <strong>"+s.RemoteVersion+"</strong> from GitHub <a href='https://github.com/mariokernich/odapu-abap/releases/latest'>here</a>.",type:"Information",e+
nableFormattedText:true}).addStyleClass("sapUiTinyMarginTop sapThemeFontSizeSmall"))}const a=new t({title:"About",contentWidth:"400px",draggable:true,content:new y({items:[o.addStyleClass("sapUiSmallMarginBottom"),new l({text:"This app gives you a powerf+
ul tool to test ODATA services – whether it's modern ABAP RAP/CDS or classic SEGW projects – as well as APC (ABAP Push Channels).",wrapping:true}).addStyleClass("sapUiTinyMarginBottom sapUiTinyMarginBegin sapUiTinyMarginEnd"),new l({text:"If you find thi+
s project helpful, please consider giving it a star on GitHub ⭐. For companies and individuals who want to support the development, sponsorship opportunities are available - sponsors will be prominently featured in the application.",wrapping:true}).addSt+
yleClass("sapUiTinyMarginBottom sapUiTinyMarginBegin sapUiTinyMarginEnd"),new E({items:[new j({text:"Developer: Mario Kernich 👨‍💻",target:"_blank",href:"https://www.linkedin.com/in/mariokernich/",icon:"sap-icon://linkedin"})],alignItems:"Center",justif+
yContent:"Center"}).addStyleClass("sapUiTinyMarginTop"),new E({items:[new j({text:"GitHub Repository",target:"_blank",href:"https://github.com/mariokernich/odapu-abap",icon:"sap-icon://github"}).addStyleClass("sapUiSmallMarginEnd"),new j({text:"Request F+
eature or Report Bug",target:"_blank",href:"https://github.com/mariokernich/odapu-abap/issues",icon:"sap-icon://bug"})],justifyContent:"Center"}).addStyleClass("sapUiSmallMarginTop")],alignItems:"Center"}).addStyleClass("sapUiSmallMargin")});const i=new +
r({text:"Close",press:()=>{a.close();a.destroy()},type:"Ghost",icon:"sap-icon://decline"});a.setEndButton(i);a.setInitialFocus(i);a.open()},selectProjectType:async function e(){return new Promise((e,n)=>{const s=new t({title:"Choose type",draggable:true}+
);const o=new C;const a=new S({header:"OData",subheader:"RAP Service, SEGW Project",frameType:"OneByOne",tileContent:[new T({content:new y({items:[new b({src:"sap-icon://add-activity",size:"2rem"})]})})],press:()=>{e("ODATA");s.close();s.destroy()}});o.a+
ddItem(a);o.addItem(new S({header:"APC",subheader:"ABAP Push Channel",frameType:"OneByOne",tileContent:[new T({content:new y({items:[new b({src:"sap-icon://add-activity",size:"2rem"})]})})],press:()=>{e("APC");s.close();s.destroy()}}));o.setGridTemplateC+
olumns("1fr 1fr");o.setGridGap("20px");s.addContent(new y({items:[new l({text:"Please select the type of project you want to create"}).addStyleClass("sapUiSmallMarginBottom"),o],width:"100%",height:"100%",fitContainer:true}));s.addStyleClass("sapUiConten+
tPadding");s.addButton(new r({text:"About",icon:"sap-icon://information",press:()=>{this.showAboutDialog()}}));s.addButton(new r({text:"Cancel",icon:"sap-icon://decline",press:()=>{s.close();s.destroy();n(new Error("Dialog closed"))}}));s.setInitialFocus+
(a);s.open()})},addSort:async function e(s){return new Promise((e,o)=>{const a=()=>{l.close();l.destroy();e({property:i.getSelectedKey(),direction:c.getSelectedKey()})};const i=new g({items:s.filter(e=>e.name.toLowerCase()!=="delete_mc"&&e.name.toLowerCa+
se()!=="update_mc"&&e.name.toLowerCase()!=="create_mc").map(e=>new p({key:e.name,text:e.name})),width:"100%"});const c=new g({items:[new p({key:"asc",text:"Ascending"}),new p({key:"desc",text:"Descending"})],width:"100%"});const l=new t({title:"Add Sorte+
r",contentWidth:"400px",draggable:true,initialFocus:i,content:[new y({items:[new n({text:"Property"}),i,new n({text:"Direction"}),c]}).addStyleClass("sapUiSmallMargin")]});l.setBeginButton(new r({text:"Save",press:a,type:"Emphasized",icon:"sap-icon://acc+
ept"}));l.setEndButton(new r({text:"Cancel",press:()=>{l.close();l.destroy();o(new Error("Dialog closed"))},type:"Ghost",icon:"sap-icon://decline"}));l.open()})},showXmlCodeEditor:async function e(n){return new Promise(e=>{const s=n?I.formatXml(n):"";con+
st o=new t({title:"Metadata",contentHeight:"100%",contentWidth:"100%"});const a=new P({editable:false,type:"xml",value:s,width:"100%",height:"100%",maxLines:1e3,syntaxHints:false});o.addContent(new y({items:[a],width:"100%",height:"100%",fitContainer:tru+
e}));o.addButton(new r({text:"Copy",icon:"sap-icon://copy",press:()=>{void I.copy2Clipboard(s);c.show("Copied to clipboard")}}));o.addButton(new r({text:"Close",icon:"sap-icon://decline",press:()=>{o.close();o.destroy();e(false)}}));o.open()})},showProje+
ctListDialog:async function s(){const p=await this.requests.getProjects();return new Promise((s,g)=>{const y=new d({placeholder:"Search Projects",liveChange:e=>{const t=e.getParameter("newValue")?.toLowerCase()??"";const n=f.getBinding("items");n.filter(+
t?new h("ProjectName",m.Contains,t):[]);S()}});const x=new t({title:`Saved Projects`,contentWidth:"400px",contentHeight:"600px",busyIndicatorDelay:0,draggable:true,initialFocus:y});const S=()=>{const e=f.getBinding("items");const t=e?e.getLength():0;x.se+
tTitle(`Saved Projects (${t})`)};const C=new u({content:[y,new w]});x.addContent(C);const f=new a({columns:[new e({header:new n({text:"Project Name"})}),new e({header:new n({text:"Actions"}),hAlign:"End"})],growing:true,growingThreshold:100,noDataText:"N+
o projects found"});f.setMode("SingleSelectMaster");f.bindItems({path:"projects>/",template:new i({cells:[new l({text:"{projects>ProjectName}"}),new E({items:[new r({icon:"sap-icon://delete",type:"Reject",press:e=>{const t=e.getSource();const n=t.getPare+
nt();const s=n.getBindingContext("projects");if(!s){return}const o=s.getObject();void V.showConfirmationDialog(`Are you sure you want to delete project "${o.ProjectName}"?`).then(async e=>{if(e){x.setBusy(true);try{await this.requests.deleteProject(o);c.+
show("Project deleted successfully");const e=x.getModel("projects");const t=e.getProperty("/");const n=t.findIndex(e=>e.ProjectName===o.ProjectName);if(n>-1){t.splice(n,1);e.setProperty("/",t)}S()}catch(e){const t=e instanceof Error?e.message:String(e);k+
.error(`Error deleting project: ${t}`)}finally{x.setBusy(false)}}})}})],justifyContent:"End"})]})});x.addContent(f);x.setModel(new o(p),"projects");S();x.addButton(new r({text:"Load",press:()=>{const e=f.getSelectedItem();if(!e){c.show("Please select a p+
roject");return}const t=e.getBindingContext("projects");if(!t){return}const n=t.getObject();s(n);x.close();x.destroy()},type:"Emphasized",icon:"sap-icon://accept"}));x.addButton(new r({text:"Cancel",press:()=>{g(new Error("Dialog closed"));x.close();x.de+
stroy()},type:"Ghost",icon:"sap-icon://decline"}));x.open()})},showSaveProjectDialog:async function e(){return new Promise((e,s)=>{const o=()=>{const t=a.getValue();if(!t){c.show("Please enter a project name");return}e(t);i.close();i.destroy()};const a=n+
ew x({placeholder:"Enter project name...",width:"100%",submit:o});const i=new t({title:"Save Project",contentWidth:"400px",content:[new y({items:[new n({text:"Project Name"}),a]}).addStyleClass("sapUiSmallMargin")],initialFocus:a,draggable:true});i.setBe+
ginButton(new r({text:"Save",press:o,type:"Emphasized",icon:"sap-icon://accept"}));i.setEndButton(new r({text:"Cancel",press:()=>{s(new Error("Dialog closed"));i.close();i.destroy()},type:"Ghost",icon:"sap-icon://decline"}));i.open()})}});V.showConfirmat+
ionDialog=async function e(n){return new Promise(e=>{const s=new t({title:"Confirm",content:new l({text:n}).addStyleClass("sapUiSmallMargin")});s.setBeginButton(new r({text:"Yes",press:()=>{s.close();s.destroy();e(true)},type:"Emphasized",icon:"sap-icon:+
//accept"}));s.setEndButton(new r({text:"No",press:()=>{s.close();s.destroy();e(false)},type:"Ghost",icon:"sap-icon://decline"}));s.setEscapeHandler(()=>{s.close();s.destroy();e(false)});s.open()})};return V});                                             
//# sourceMappingURL=DialogManager.js.map                                                                                                                                                                                                                      