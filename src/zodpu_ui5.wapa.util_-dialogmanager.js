sap.ui.define(["sap/m/Column","sap/m/Dialog","sap/m/Label","sap/ui/base/ManagedObject","sap/ui/model/json/JSONModel","sap/m/Table","sap/m/ColumnListItem","sap/m/Button","sap/m/MessageToast","sap/m/Text","sap/m/SearchField","sap/ui/core/Item","sap/m/Toolb+
arSpacer","sap/m/Toolbar","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/m/Select","sap/m/VBox","sap/m/Input","sap/m/GenericTile","sap/ui/layout/cssgrid/CSSGrid","sap/m/SegmentedButtonItem","sap/m/SegmentedButton","./Util","sap/ui/codeeditor/Co+
deEditor","sap/ui/core/Icon","sap/m/TileContent","sap/m/HBox","sap/m/MessageBox","./ODataRequests"],function(e,t,n,s,o,a,c,i,r,l,d,p,w,u,m,h,y,g,x,C,S,f,P,v,E,B,j,k,b,L){"use strict";function T(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.+
default:e}const D=T(v);const M=T(L);const _=s.extend("de.kernich.odpu.util.DialogManager",{constructor:function e(t){s.prototype.constructor.call(this);this.component=t;this.requests=new M(t.getModel())},pickApc:async function s(p){const y=new t({title:`+
Select Push Channel (${p.length})`,contentWidth:"80%",contentHeight:"80%"});y.setModel(new o(p),"apc");const g=()=>{const e=S.getBinding("items");const t=e?e.getLength():0;y.setTitle(`Select Push Channel (${t})`)};const x=new d({placeholder:"Search Push +
Channels",liveChange:e=>{const t=e.getParameter("newValue").toLowerCase();const n=S.getBinding("items");n.filter(t?new h({filters:[new h("application_id",m.Contains,t),new h("path",m.Contains,t)],and:false}):[]);g()}});const C=new u({content:[x,new w]});+
y.addContent(C);const S=new a({columns:[new e({header:new n({text:"application_id"})}),new e({header:new n({text:"path"})}),new e({header:new n({text:"protocol_type_id"})}),new e({header:new n({text:"amc_message_type_id"})})],growing:true,growingThreshol+
d:100});S.setMode("SingleSelectMaster");S.bindItems({path:"apc>/",template:new c({cells:[new l({text:"{apc>application_id}"}),new l({text:"{apc>path}"}),new l({text:"{apc>protocol_type_id}"}),new l({text:"{apc>amc_message_type_id}"})]})});y.addContent(S)+
;return new Promise((e,t)=>{y.addButton(new i({text:"Choose",press:()=>{const t=S.getSelectedItem();if(!t){r.show("Please select a push channel.");return}const n=t.getBindingContext("apc");const s=n.getObject();e(s);y.close();y.destroy()},type:"Emphasize+
d",icon:"sap-icon://accept"}));y.addButton(new i({text:"Cancel",press:()=>{t(new Error("Dialog closed"));y.close();y.destroy()},type:"Ghost",icon:"sap-icon://decline"}));y.open()})},pickService:async function s(g){const x=new t({title:`Select Service (${+
g.length})`,contentWidth:"80%",contentHeight:"80%"});const C=()=>{const e=S.getBinding("items");const t=e?e.getLength():0;x.setTitle(`Select Service (${t})`)};const S=new a({growingThreshold:9999,columns:[new e({header:new n({text:"Service Name / Group I+
D"})}),new e({header:new n({text:"Service Path"})}),new e({header:new n({text:"Description"})}),new e({header:new n({text:"OData Type"}),width:"100px"}),new e({header:new n({text:"Version"}),width:"100px"})],growing:true});S.setMode("SingleSelectMaster")+
;S.bindItems({path:"services>/",template:new c({cells:[new l({text:"{services>ServiceName}{services>GroupId}"}),new l({text:"{services>ServicePath}"}),new l({text:"{services>Description}"}),new l({text:"{services>ODataType}"}),new l({text:"{services>Vers+
ion}"})]})});let f="";let P="ALL";const v=()=>{const e=S.getBinding("items");const t=[];if(f){t.push(new h({filters:[new h("ServiceName",m.Contains,f),new h("ServicePath",m.Contains,f)]}))}if(P!=="ALL"){t.push(new h("ODataType",m.EQ,P))}e.filter(t.length+
>0?new h({filters:t,and:true}):[]);C()};const E=new d({placeholder:"Search Services",liveChange:e=>{f=e.getParameter("newValue").toLowerCase();v()}});const B=new y({items:[new p({key:"ALL",text:"All"}),new p({key:"2",text:"2"}),new p({key:"4",text:"4"})]+
,change:e=>{P=e.getParameter("selectedItem").getKey();v()}});const j=new u({content:[E,new w,B,new w]}).addStyleClass("sapUiResponsivePadding");x.addContent(j);x.addContent(S);x.setModel(new o(g),"services");return new Promise((e,t)=>{x.addButton(new i({+
text:"Choose",press:()=>{const t=S.getSelectedItem();if(!t){r.show("Please select a service.");return}const n=t.getBindingContext("services");const s=n.getObject();e(s);x.close();x.destroy()},type:"Emphasized",icon:"sap-icon://accept"}));x.addButton(new +
i({text:"Cancel",press:()=>{t(new Error("Dialog closed"));x.close();x.destroy()},type:"Ghost",icon:"sap-icon://decline"}));x.open()})},showAddHeaderDialog:async function e(){return new Promise((e,s)=>{const o=new P({items:[new f({text:"Custom Header",key+
:"custom"}),new f({text:"Pre defined",key:"predefined"})],width:"100%",selectionChange:()=>{if(o.getSelectedKey()==="custom"){w.setVisible(true);a.setVisible(false)}else{w.setVisible(false);a.setVisible(true)}}}).addStyleClass("sapUiSmallMarginBottom");c+
onst a=new y({width:"100%",visible:false});const c=[{key:"sap-client",value:"100"},{key:"sap-language",value:"EN"},{key:"accept",value:"application/json"},{key:"content-type",value:"application/json"},{key:"x-csrf-token",value:"fetch"}];c.forEach(e=>{a.a+
ddItem(new p({key:e.key,text:e.key}))});const l=()=>{let t="";const n=d.getValue();switch(o.getSelectedKey()){case"custom":t=w.getValue();break;case"predefined":t=a.getSelectedKey();break}if(!t){r.show("Please enter a key.");return}if(!n){r.show("Please +
enter a value.");return}u.close();u.destroy();e({key:t,value:n})};const d=new x({placeholder:"Enter value",submit:l,width:"100%"});const w=new x({placeholder:"Enter key",submit:l,width:"100%"});const u=new t({title:"Add Header",contentWidth:"400px",dragg+
able:true,content:[new g({items:[o,new n({text:"Key"}),w,a,new n({text:"Value"}),d]}).addStyleClass("sapUiSmallMargin")]});u.setBeginButton(new i({text:"Save",press:l,type:"Emphasized",icon:"sap-icon://accept"}));u.setEndButton(new i({text:"Cancel",press+
:()=>{u.close();u.destroy();s(new Error("Dialog closed"))},type:"Ghost",icon:"sap-icon://decline"}));u.open()})},addFilter:async function e(s){return new Promise((e,o)=>{const a=()=>{d.close();d.destroy();e({property:c.getSelectedKey(),operator:r.getSele+
ctedKey(),value:l.getValue()})};const c=new y({items:s.filter(e=>e.name.toLowerCase()!=="delete_mc"&&e.name.toLowerCase()!=="update_mc"&&e.name.toLowerCase()!=="create_mc").map(e=>new p({key:e.name,text:e.name})),width:"100%"});const r=new y({items:[new +
p({key:m.Contains,text:"Contains"}),new p({key:m.EQ,text:"Equal"}),new p({key:m.NE,text:"Not Equal"}),new p({key:m.GT,text:"Greater Than"}),new p({key:m.LT,text:"Less Than"}),new p({key:m.GE,text:"Greater Than or Equal"}),new p({key:m.LE,text:"Less Than +
or Equal"})],width:"100%"});const l=new x({placeholder:"Enter value",submit:a,width:"100%"});const d=new t({title:"Add Filter",contentWidth:"400px",draggable:true,initialFocus:c,content:[new g({items:[new n({text:"Property"}),c,new n({text:"Operator"}),r+
,new n({text:"Value"}),l]}).addStyleClass("sapUiSmallMargin")]});d.setBeginButton(new i({text:"Save",press:a,type:"Emphasized",icon:"sap-icon://accept"}));d.setEndButton(new i({text:"Cancel",press:()=>{d.close();d.destroy();o(new Error("Dialog closed"))}+
,type:"Ghost",icon:"sap-icon://decline"}));d.open()})},editFilter:async function e(s,o){return new Promise((e,a)=>{const c=()=>{w.close();w.destroy();e({property:r.getSelectedKey(),operator:l.getSelectedKey(),value:d.getValue()})};const r=new y({items:o.+
filter(e=>e.name.toLowerCase()!=="delete_mc"&&e.name.toLowerCase()!=="update_mc"&&e.name.toLowerCase()!=="create_mc").map(e=>new p({key:e.name,text:e.name})),width:"100%"});const l=new y({items:[new p({key:m.Contains,text:"Contains"}),new p({key:m.EQ,tex+
t:"Equal"}),new p({key:m.NE,text:"Not Equal"}),new p({key:m.GT,text:"Greater Than"}),new p({key:m.LT,text:"Less Than"})],width:"100%"});const d=new x({placeholder:"Enter value",submit:c,width:"100%"});d.setValue(s.value);r.setSelectedKey(s.property);l.se+
tSelectedKey(s.operator);const w=new t({title:"Edit Filter",contentWidth:"400px",draggable:true,initialFocus:r,content:[new g({items:[new n({text:"Property"}),r,new n({text:"Operator"}),l,new n({text:"Value"}),d]}).addStyleClass("sapUiSmallMargin")]});w.+
setBeginButton(new i({text:"Save",press:c,type:"Emphasized",icon:"sap-icon://accept"}));w.setEndButton(new i({text:"Cancel",press:()=>{w.close();w.destroy();a(new Error("Dialog closed"))},type:"Ghost",icon:"sap-icon://decline"}));w.open()})},addSort:asyn+
c function e(s){return new Promise((e,o)=>{const a=()=>{l.close();l.destroy();e({property:c.getSelectedKey(),direction:r.getSelectedKey()})};const c=new y({items:s.filter(e=>e.name.toLowerCase()!=="delete_mc"&&e.name.toLowerCase()!=="update_mc"&&e.name.t+
oLowerCase()!=="create_mc").map(e=>new p({key:e.name,text:e.name})),width:"100%"});const r=new y({items:[new p({key:"asc",text:"Ascending"}),new p({key:"desc",text:"Descending"})],width:"100%"});const l=new t({title:"Add Sorter",contentWidth:"400px",drag+
gable:true,initialFocus:c,content:[new g({items:[new n({text:"Property"}),c,new n({text:"Direction"}),r]}).addStyleClass("sapUiSmallMargin")]});l.setBeginButton(new i({text:"Save",press:a,type:"Emphasized",icon:"sap-icon://accept"}));l.setEndButton(new i+
({text:"Cancel",press:()=>{l.close();l.destroy();o(new Error("Dialog closed"))},type:"Ghost",icon:"sap-icon://decline"}));l.open()})},showXmlCodeEditor:async function e(n){return new Promise(e=>{const s=n?D.formatXml(n):"";const o=new t({title:"Metadata"+
,contentHeight:"100%",contentWidth:"100%"});const a=new E({editable:false,type:"xml",value:s,width:"100%",height:"100%",maxLines:1e3,syntaxHints:false});o.addContent(new g({items:[a],width:"100%",height:"100%",fitContainer:true}));o.addButton(new i({text+
:"Copy",icon:"sap-icon://copy",press:()=>{void D.copy2Clipboard(s);r.show("Copied to clipboard")}}));o.addButton(new i({text:"Close",icon:"sap-icon://decline",press:()=>{o.close();o.destroy();e(false)}}));o.open()})},showProjectListDialog:async function +
s(){const p=await this.requests.getProjects();return new Promise((s,y)=>{const g=new d({placeholder:"Search Projects",liveChange:e=>{const t=e.getParameter("newValue").toLowerCase();const n=f.getBinding("items");n.filter(t?new h("ProjectName",m.Contains,+
t):[]);C()}});const x=new t({title:`Saved Projects`,contentWidth:"400px",contentHeight:"600px",busyIndicatorDelay:0,draggable:true,initialFocus:g});const C=()=>{const e=f.getBinding("items");const t=e?e.getLength():0;x.setTitle(`Saved Projects (${t})`)};+
const S=new u({content:[g,new w]});x.addContent(S);const f=new a({columns:[new e({header:new n({text:"Project Name"})}),new e({header:new n({text:"Actions"}),hAlign:"End"})],growing:true,growingThreshold:100,noDataText:"No projects found"});f.setMode("Si+
ngleSelectMaster");f.bindItems({path:"projects>/",template:new c({cells:[new l({text:"{projects>ProjectName}"}),new k({items:[new i({icon:"sap-icon://delete",type:"Reject",press:e=>{const t=e.getSource();const n=t.getParent();const s=n.getBindingContext(+
"projects");if(!s){return}const o=s.getObject();void _.showConfirmationDialog(`Are you sure you want to delete project "${o.ProjectName}"?`).then(async e=>{if(e){x.setBusy(true);try{await this.requests.deleteProject(o);r.show("Project deleted successfull+
y");const e=x.getModel("projects");const t=e.getProperty("/");const n=t.findIndex(e=>e.ProjectName===o.ProjectName);if(n>-1){t.splice(n,1);e.setProperty("/",t)}C()}catch(e){const t=e instanceof Error?e.message:String(e);b.error(`Error deleting project: $+
{t}`)}finally{x.setBusy(false)}}})}})],justifyContent:"End"})]})});x.addContent(f);x.setModel(new o(p),"projects");C();x.addButton(new i({text:"Load",press:()=>{const e=f.getSelectedItem();if(!e){r.show("Please select a project");return}const t=e.getBind+
ingContext("projects");if(!t){return}const n=t.getObject();s(n);x.close();x.destroy()},type:"Emphasized",icon:"sap-icon://accept"}));x.addButton(new i({text:"Cancel",press:()=>{y(new Error("Dialog closed"));x.close();x.destroy()},type:"Ghost",icon:"sap-i+
con://decline"}));x.open()})},showSaveProjectDialog:async function e(){return new Promise((e,s)=>{const o=()=>{const t=a.getValue();if(!t){r.show("Please enter a project name");return}e(t);c.close();c.destroy()};const a=new x({placeholder:"Enter project +
name...",width:"100%",submit:o});const c=new t({title:"Save Project",contentWidth:"400px",content:[new g({items:[new n({text:"Project Name"}),a]}).addStyleClass("sapUiSmallMargin")],initialFocus:a,draggable:true});c.setBeginButton(new i({text:"Save",pres+
s:o,type:"Emphasized",icon:"sap-icon://accept"}));c.setEndButton(new i({text:"Cancel",press:()=>{s(new Error("Dialog closed"));c.close();c.destroy()},type:"Ghost",icon:"sap-icon://decline"}));c.open()})}});_.showConfirmationDialog=async function e(n){ret+
urn new Promise(e=>{const s=new t({title:"Confirm",content:new l({text:n}).addStyleClass("sapUiSmallMargin")});s.setBeginButton(new i({text:"Yes",press:()=>{s.close();s.destroy();e(true)},type:"Emphasized",icon:"sap-icon://accept"}));s.setEndButton(new i+
({text:"No",press:()=>{s.close();s.destroy();e(false)},type:"Ghost",icon:"sap-icon://decline"}));s.setEscapeHandler(()=>{s.close();s.destroy();e(false)});s.open()})};_.selectProjectType=async function e(){return new Promise(e=>{const n=new t({title:"Choo+
se type"});const s=new S;s.addItem(new C({header:"OData",subheader:"RAP Service, SEGW Project",frameType:"OneByOne",tileContent:[new j({content:new g({items:[new B({src:"sap-icon://add-activity",size:"2rem"})]})})],press:()=>{e("ODATA");n.close();n.destr+
oy()}}));s.addItem(new C({header:"APC",subheader:"ABAP Push Channel",frameType:"OneByOne",tileContent:[new j({content:new g({items:[new B({src:"sap-icon://add-activity",size:"2rem"})]})})],press:()=>{e("APC");n.close();n.destroy()}}));s.setGridTemplateCo+
lumns("1fr 1fr");s.setGridGap("20px");n.addContent(new g({items:[new l({text:"Please select the type of project you want to create"}).addStyleClass("sapUiSmallMarginBottom"),s],width:"100%",height:"100%",fitContainer:true}));n.addStyleClass("sapUiContent+
Padding");n.addButton(new i({text:"Cancel",icon:"sap-icon://decline",press:()=>{n.close();n.destroy()}}));n.open()})};return _});                                                                                                                              
//# sourceMappingURL=DialogManager.js.map                                                                                                                                                                                                                      