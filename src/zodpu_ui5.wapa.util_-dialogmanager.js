sap.ui.define(["sap/m/Column","sap/m/Dialog","sap/m/Label","sap/ui/base/ManagedObject","sap/ui/model/json/JSONModel","sap/m/Table","sap/m/ColumnListItem","sap/m/Button","sap/m/MessageToast","sap/m/Text","sap/m/SearchField","sap/ui/core/Item","sap/m/Toolb+
arSpacer","sap/m/Toolbar","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/m/Select","sap/m/VBox","sap/m/Input","sap/m/GenericTile","sap/ui/layout/cssgrid/CSSGrid","sap/m/SegmentedButtonItem","sap/m/SegmentedButton","./Util","sap/ui/codeeditor/Co+
deEditor","sap/ui/core/Icon","sap/m/TileContent","sap/m/HBox","sap/m/MessageBox","./ODataRequests"],function(e,t,n,s,o,a,i,c,r,l,d,p,w,u,m,y,h,g,x,S,C,f,v,P,E,B,k,j,b,D){"use strict";function T(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.+
default:e}const L=T(P);const M=T(D);const G=s.extend("de.kernich.odpu.util.DialogManager",{constructor:function e(t){s.prototype.constructor.call(this);this.component=t;this.requests=new M(t.getModel())},pickApc:async function s(p){const h=new t({title:`+
Select Push Channel (${p.length})`,contentWidth:"80%",contentHeight:"80%"});h.setModel(new o(p),"apc");const g=()=>{const e=C.getBinding("items");const t=e?e.getLength():0;h.setTitle(`Select Push Channel (${t})`)};const x=new d({placeholder:"Search Push +
Channels",liveChange:e=>{const t=e.getParameter("newValue").toLowerCase();const n=C.getBinding("items");n.filter(t?new y({filters:[new y("application_id",m.Contains,t),new y("path",m.Contains,t)],and:false}):[]);g()}});const S=new u({content:[x,new w]});+
h.addContent(S);const C=new a({columns:[new e({header:new n({text:"Application ID"})}),new e({header:new n({text:"Path"})}),new e({header:new n({text:"Description"})}),new e({header:new n({text:"protocol_type_id"})}),new e({header:new n({text:"amc_messag+
e_type_id"})})],growing:true,growingThreshold:100});C.setMode("SingleSelectMaster");C.bindItems({path:"apc>/",template:new i({cells:[new l({text:"{apc>application_id}"}),new l({text:"{apc>path}"}),new l({text:"{apc>description}"}),new l({text:"{apc>proto+
col_type_id}"}),new l({text:"{apc>amc_message_type_id}"})]})});h.addContent(C);return new Promise((e,t)=>{h.addButton(new c({text:"Choose",press:()=>{const t=C.getSelectedItem();if(!t){r.show("Please select a push channel.");return}const n=t.getBindingCo+
ntext("apc");const s=n.getObject();e(s);h.close();h.destroy()},type:"Emphasized",icon:"sap-icon://accept"}));h.addButton(new c({text:"Cancel",press:()=>{t(new Error("Dialog closed"));h.close();h.destroy()},type:"Ghost",icon:"sap-icon://decline"}));h.open+
()})},pickService:async function s(){let g=[];const x=new o(g);const S=new t({title:`Select Service`,contentWidth:"80%",contentHeight:"80%",busyIndicatorDelay:0,draggable:true});const C=()=>{const e=f.getBinding("items");const t=e?e.getLength():0;S.setTi+
tle(`Select Service (${t})`)};const f=new a({growingThreshold:9999,columns:[new e({header:new n({text:"Service Name / Group ID"})}),new e({header:new n({text:"Service Path"})}),new e({header:new n({text:"Description"})}),new e({header:new n({text:"OData +
Type"}),width:"100px"}),new e({header:new n({text:"Version"}),width:"100px"})],growing:true,mode:"SingleSelectMaster"});f.bindItems({path:"services>/",template:new i({cells:[new l({text:"{services>ServiceName}{services>GroupId}"}),new l({text:"{services>+
ServicePath}"}),new l({text:"{services>Description}"}),new l({text:"{services>ODataType}"}),new l({text:"{services>Version}"})]})});let v="";let P="ALL";const E=()=>{const e=f.getBinding("items");const t=[];if(v){t.push(new y({filters:[new y("ServiceName+
",m.Contains,v),new y("ServicePath",m.Contains,v)]}))}if(P!=="ALL"){t.push(new y("ODataType",m.EQ,P))}e.filter(t.length>0?new y({filters:t,and:true}):[]);C()};const B=new d({placeholder:"Search Services",liveChange:e=>{v=e.getParameter("newValue").toLowe+
rCase();E()}});const k=new h({items:[new p({key:"ALL",text:"All"}),new p({key:"2",text:"2"}),new p({key:"4",text:"4"})],change:e=>{P=e.getParameter("selectedItem").getKey();E()}});const j=async()=>{S.setBusy(true);try{g=await this.requests.getServices();+
x.setProperty("/",g);S.setTitle(`Select Service (${g.length})`);r.show("Services refreshed")}finally{S.setBusy(false)}};const b=new u({content:[B,new w,k,new c({press:()=>{void j()},type:"Ghost",tooltip:"Refresh Services",icon:"sap-icon://refresh"})]}).a+
ddStyleClass("sapUiResponsivePadding");S.addContent(b);S.addContent(f);S.setModel(x,"services");S.open();S.setBusy(true);g=await this.requests.getServices();x.setProperty("/",g);S.setTitle(`Select Service (${g.length})`);S.setBusy(false);return new Promi+
se((e,t)=>{const n=async()=>{const t=await this.pickCustomService();e(t);S.close();S.destroy()};S.addButton(new c({text:"Choose",press:()=>{const t=f.getSelectedItem();if(!t){r.show("Please select a service.");return}const n=t.getBindingContext("services+
");const s=n.getObject();e(s);S.close();S.destroy()},type:"Emphasized",icon:"sap-icon://accept"}));S.addButton(new c({text:"Use Custom Service",press:()=>{void n()},type:"Ghost",icon:"sap-icon://add-document"}));S.addButton(new c({text:"Cancel",press:()=+
>{t(new Error("Dialog closed"));S.close();S.destroy()},type:"Ghost",icon:"sap-icon://decline"}))})},pickCustomService:async function e(){return new Promise((e,n)=>{const s=new t({title:"Select Custom Service",draggable:true,contentWidth:"500px"});const o+
=new v({items:[new f({text:"OData V2",key:"2"}),new f({text:"OData V4",key:"4"})],width:"100%"});const a=new x({placeholder:"Enter service path",width:"100%"});const i=new c({text:"Save",type:"Emphasized",icon:"sap-icon://accept",press:()=>{e({ServicePat+
h:a.getValue(),ODataType:o.getSelectedKey(),Version:"",ServiceName:"Custom Service"});s.close();s.destroy()}});const r=new c({text:"Cancel",type:"Ghost",icon:"sap-icon://decline",press:()=>{s.close();s.destroy();n(new Error("Dialog closed"))}});s.addCont+
ent(new g({items:[o,a,new j({items:[i,r]})]}).addStyleClass("sapUiSmallMargin"));s.setBeginButton(i);s.setEndButton(r);s.setInitialFocus(a);s.open()})},showAddHeaderDialog:async function e(){return new Promise((e,s)=>{const o=new v({items:[new f({text:"C+
ustom Header",key:"custom"}),new f({text:"Pre defined",key:"predefined"})],width:"100%",selectionChange:()=>{if(o.getSelectedKey()==="custom"){w.setVisible(true);a.setVisible(false)}else{w.setVisible(false);a.setVisible(true)}}}).addStyleClass("sapUiSmal+
lMarginBottom");const a=new h({width:"100%",visible:false});const i=[{key:"sap-client",value:"100"},{key:"sap-language",value:"EN"},{key:"accept",value:"application/json"},{key:"content-type",value:"application/json"},{key:"x-csrf-token",value:"fetch"}];+
i.forEach(e=>{a.addItem(new p({key:e.key,text:e.key}))});const l=()=>{let t="";const n=d.getValue();switch(o.getSelectedKey()){case"custom":t=w.getValue();break;case"predefined":t=a.getSelectedKey();break}if(!t){r.show("Please enter a key.");return}if(!n+
){r.show("Please enter a value.");return}u.close();u.destroy();e({key:t,value:n})};const d=new x({placeholder:"Enter value",submit:l,width:"100%"});const w=new x({placeholder:"Enter key",submit:l,width:"100%"});const u=new t({title:"Add Header",contentWi+
dth:"400px",draggable:true,content:[new g({items:[o,new n({text:"Key"}),w,a,new n({text:"Value"}).addStyleClass("sapUiSmallMarginTop"),d]}).addStyleClass("sapUiSmallMargin")]});u.setBeginButton(new c({text:"Save",press:l,type:"Emphasized",icon:"sap-icon:+
//accept"}));u.setEndButton(new c({text:"Cancel",press:()=>{u.close();u.destroy();s(new Error("Dialog closed"))},type:"Ghost",icon:"sap-icon://decline"}));u.open()})},addFilter:async function e(s){return new Promise((e,o)=>{const a=()=>{d.close();d.destr+
oy();e({property:i.getSelectedKey(),operator:r.getSelectedKey(),value:l.getValue()})};const i=new h({items:s.filter(e=>e.name.toLowerCase()!=="delete_mc"&&e.name.toLowerCase()!=="update_mc"&&e.name.toLowerCase()!=="create_mc").map(e=>new p({key:e.name,te+
xt:e.name})),width:"100%"});const r=new h({items:[new p({key:m.Contains,text:"Contains"}),new p({key:m.NotContains,text:"Does Not Contain"}),new p({key:m.StartsWith,text:"Starts With"}),new p({key:m.EndsWith,text:"Ends With"}),new p({key:m.NotStartsWith,+
text:"Does Not Start With"}),new p({key:m.NotEndsWith,text:"Does Not End With"}),new p({key:m.EQ,text:"Equal"}),new p({key:m.NE,text:"Not Equal"}),new p({key:m.GT,text:"Greater Than"}),new p({key:m.LT,text:"Less Than"}),new p({key:m.GE,text:"Greater Than+
 or Equal"}),new p({key:m.LE,text:"Less Than or Equal"})],width:"100%"});const l=new x({placeholder:"Enter value",submit:a,width:"100%"});const d=new t({title:"Add Filter",contentWidth:"400px",draggable:true,initialFocus:i,content:[new g({items:[new n({t+
ext:"Property"}),i,new n({text:"Operator"}),r,new n({text:"Value"}),l]}).addStyleClass("sapUiSmallMargin")]});d.setBeginButton(new c({text:"Save",press:a,type:"Emphasized",icon:"sap-icon://accept"}));d.setEndButton(new c({text:"Cancel",press:()=>{d.close+
();d.destroy();o(new Error("Dialog closed"))},type:"Ghost",icon:"sap-icon://decline"}));d.open()})},editFilter:async function e(s,o){return new Promise((e,a)=>{const i=()=>{w.close();w.destroy();e({property:r.getSelectedKey(),operator:l.getSelectedKey(),+
value:d.getValue()})};const r=new h({items:o.filter(e=>e.name.toLowerCase()!=="delete_mc"&&e.name.toLowerCase()!=="update_mc"&&e.name.toLowerCase()!=="create_mc").map(e=>new p({key:e.name,text:e.name})),width:"100%"});const l=new h({items:[new p({key:m.C+
ontains,text:"Contains"}),new p({key:m.EQ,text:"Equal"}),new p({key:m.NE,text:"Not Equal"}),new p({key:m.GT,text:"Greater Than"}),new p({key:m.LT,text:"Less Than"})],width:"100%"});const d=new x({placeholder:"Enter value",submit:i,width:"100%"});d.setVal+
ue(s.value);r.setSelectedKey(s.property);l.setSelectedKey(s.operator);const w=new t({title:"Edit Filter",contentWidth:"400px",draggable:true,initialFocus:r,content:[new g({items:[new n({text:"Property"}),r,new n({text:"Operator"}),l,new n({text:"Value"})+
,d]}).addStyleClass("sapUiSmallMargin")]});w.setBeginButton(new c({text:"Save",press:i,type:"Emphasized",icon:"sap-icon://accept"}));w.setEndButton(new c({text:"Cancel",press:()=>{w.close();w.destroy();a(new Error("Dialog closed"))},type:"Ghost",icon:"sa+
p-icon://decline"}));w.open()})},addSort:async function e(s){return new Promise((e,o)=>{const a=()=>{l.close();l.destroy();e({property:i.getSelectedKey(),direction:r.getSelectedKey()})};const i=new h({items:s.filter(e=>e.name.toLowerCase()!=="delete_mc"&+
&e.name.toLowerCase()!=="update_mc"&&e.name.toLowerCase()!=="create_mc").map(e=>new p({key:e.name,text:e.name})),width:"100%"});const r=new h({items:[new p({key:"asc",text:"Ascending"}),new p({key:"desc",text:"Descending"})],width:"100%"});const l=new t(+
{title:"Add Sorter",contentWidth:"400px",draggable:true,initialFocus:i,content:[new g({items:[new n({text:"Property"}),i,new n({text:"Direction"}),r]}).addStyleClass("sapUiSmallMargin")]});l.setBeginButton(new c({text:"Save",press:a,type:"Emphasized",ico+
n:"sap-icon://accept"}));l.setEndButton(new c({text:"Cancel",press:()=>{l.close();l.destroy();o(new Error("Dialog closed"))},type:"Ghost",icon:"sap-icon://decline"}));l.open()})},showXmlCodeEditor:async function e(n){return new Promise(e=>{const s=n?L.fo+
rmatXml(n):"";const o=new t({title:"Metadata",contentHeight:"100%",contentWidth:"100%"});const a=new E({editable:false,type:"xml",value:s,width:"100%",height:"100%",maxLines:1e3,syntaxHints:false});o.addContent(new g({items:[a],width:"100%",height:"100%"+
,fitContainer:true}));o.addButton(new c({text:"Copy",icon:"sap-icon://copy",press:()=>{void L.copy2Clipboard(s);r.show("Copied to clipboard")}}));o.addButton(new c({text:"Close",icon:"sap-icon://decline",press:()=>{o.close();o.destroy();e(false)}}));o.op+
en()})},showProjectListDialog:async function s(){const p=await this.requests.getProjects();return new Promise((s,h)=>{const g=new d({placeholder:"Search Projects",liveChange:e=>{const t=e.getParameter("newValue").toLowerCase();const n=f.getBinding("items+
");n.filter(t?new y("ProjectName",m.Contains,t):[]);S()}});const x=new t({title:`Saved Projects`,contentWidth:"400px",contentHeight:"600px",busyIndicatorDelay:0,draggable:true,initialFocus:g});const S=()=>{const e=f.getBinding("items");const t=e?e.getLen+
gth():0;x.setTitle(`Saved Projects (${t})`)};const C=new u({content:[g,new w]});x.addContent(C);const f=new a({columns:[new e({header:new n({text:"Project Name"})}),new e({header:new n({text:"Actions"}),hAlign:"End"})],growing:true,growingThreshold:100,n+
oDataText:"No projects found"});f.setMode("SingleSelectMaster");f.bindItems({path:"projects>/",template:new i({cells:[new l({text:"{projects>ProjectName}"}),new j({items:[new c({icon:"sap-icon://delete",type:"Reject",press:e=>{const t=e.getSource();const+
 n=t.getParent();const s=n.getBindingContext("projects");if(!s){return}const o=s.getObject();void G.showConfirmationDialog(`Are you sure you want to delete project "${o.ProjectName}"?`).then(async e=>{if(e){x.setBusy(true);try{await this.requests.deleteP+
roject(o);r.show("Project deleted successfully");const e=x.getModel("projects");const t=e.getProperty("/");const n=t.findIndex(e=>e.ProjectName===o.ProjectName);if(n>-1){t.splice(n,1);e.setProperty("/",t)}S()}catch(e){const t=e instanceof Error?e.message+
:String(e);b.error(`Error deleting project: ${t}`)}finally{x.setBusy(false)}}})}})],justifyContent:"End"})]})});x.addContent(f);x.setModel(new o(p),"projects");S();x.addButton(new c({text:"Load",press:()=>{const e=f.getSelectedItem();if(!e){r.show("Pleas+
e select a project");return}const t=e.getBindingContext("projects");if(!t){return}const n=t.getObject();s(n);x.close();x.destroy()},type:"Emphasized",icon:"sap-icon://accept"}));x.addButton(new c({text:"Cancel",press:()=>{h(new Error("Dialog closed"));x.+
close();x.destroy()},type:"Ghost",icon:"sap-icon://decline"}));x.open()})},showSaveProjectDialog:async function e(){return new Promise((e,s)=>{const o=()=>{const t=a.getValue();if(!t){r.show("Please enter a project name");return}e(t);i.close();i.destroy(+
)};const a=new x({placeholder:"Enter project name...",width:"100%",submit:o});const i=new t({title:"Save Project",contentWidth:"400px",content:[new g({items:[new n({text:"Project Name"}),a]}).addStyleClass("sapUiSmallMargin")],initialFocus:a,draggable:tr+
ue});i.setBeginButton(new c({text:"Save",press:o,type:"Emphasized",icon:"sap-icon://accept"}));i.setEndButton(new c({text:"Cancel",press:()=>{s(new Error("Dialog closed"));i.close();i.destroy()},type:"Ghost",icon:"sap-icon://decline"}));i.open()})}});G.s+
howConfirmationDialog=async function e(n){return new Promise(e=>{const s=new t({title:"Confirm",content:new l({text:n}).addStyleClass("sapUiSmallMargin")});s.setBeginButton(new c({text:"Yes",press:()=>{s.close();s.destroy();e(true)},type:"Emphasized",ico+
n:"sap-icon://accept"}));s.setEndButton(new c({text:"No",press:()=>{s.close();s.destroy();e(false)},type:"Ghost",icon:"sap-icon://decline"}));s.setEscapeHandler(()=>{s.close();s.destroy();e(false)});s.open()})};G.selectProjectType=async function e(){retu+
rn new Promise((e,n)=>{const s=new t({title:"Choose type"});const o=new C;o.addItem(new S({header:"OData",subheader:"RAP Service, SEGW Project",frameType:"OneByOne",tileContent:[new k({content:new g({items:[new B({src:"sap-icon://add-activity",size:"2rem+
"})]})})],press:()=>{e("ODATA");s.close();s.destroy()}}));o.addItem(new S({header:"APC",subheader:"ABAP Push Channel",frameType:"OneByOne",tileContent:[new k({content:new g({items:[new B({src:"sap-icon://add-activity",size:"2rem"})]})})],press:()=>{e("AP+
C");s.close();s.destroy()}}));o.setGridTemplateColumns("1fr 1fr");o.setGridGap("20px");s.addContent(new g({items:[new l({text:"Please select the type of project you want to create"}).addStyleClass("sapUiSmallMarginBottom"),o],width:"100%",height:"100%",f+
itContainer:true}));s.addStyleClass("sapUiContentPadding");s.addButton(new c({text:"Cancel",icon:"sap-icon://decline",press:()=>{s.close();s.destroy();n(new Error("Dialog closed"))}}));s.open()})};return G});                                               
//# sourceMappingURL=DialogManager.js.map                                                                                                                                                                                                                      