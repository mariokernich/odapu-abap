sap.ui.define(["sap/m/MessageToast","sap/ui/base/ManagedObject","../controller/dialog/AboutDialogController","../controller/dialog/AddFilterDialogController","../controller/dialog/AddHeaderDialogController","../controller/dialog/AddSortDialogController",+
"../controller/dialog/ConfirmationDialogController","../controller/dialog/EditFilterDialogController","../controller/dialog/PickApcDialogController","../controller/dialog/PickCustomServiceDialogController","../controller/dialog/PickServiceDialogControlle+
r","../controller/dialog/ProjectListDialogController","../controller/dialog/SaveProjectDialogController","../controller/dialog/SelectProjectDialogController","../controller/dialog/UpdateAvailableDialogController","./DialogController","./ODataRequests",".+
/Util"],function(e,t,o,a,r,n,l,i,s,c,d,g,p,m,u,f,y,h){"use strict";function D(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const C=D(o);const w=D(a);const P=D(r);const v=D(n);const A=D(l);const M=D(i);const N=D(s);const S=D(c);co+
nst k=D(d);const x=D(g);const b=D(p);const j=D(m);const L=D(u);const T=D(f);const V=D(y);const _=D(h);const F=t.extend("de.kernich.odpu.util.DialogManager",{constructor:function e(o){t.prototype.constructor.call(this);this.fragmentPath="de.kernich.odpu.v+
iew.dialogs";this.component=o;this.requests=new V(o.getModel())},pickApc:async function e(t){const{controller:o,dialog:a,promise:r}=await this.createDialog({fragmentName:"PickApcDialog",controllerClass:N});const n=o.getModel("dialog");n.setProperty("/apc+
",t);a.setTitle(`Select Push Channel (${t.length})`);a.open();const l=await r;return l.selectedApc},pickService:async function e(){const{dialog:t,promise:o}=await this.createDialog({fragmentName:"PickServiceDialog",controllerClass:k});t.open();const a=aw+
ait o;return a.selectedService},pickCustomService:async function e(){const{dialog:t,promise:o}=await this.createDialog({fragmentName:"PickCustomServiceDialog",controllerClass:S});t.open();const a=await o;return{ServicePath:a.servicePath.trim(),ODataType:+
a.selectedType,Version:"",ServiceName:"Custom Service",IsFavorite:false}},showAddHeaderDialog:async function e(){const{dialog:t,promise:o}=await this.createDialog({fragmentName:"AddHeaderDialog",controllerClass:P});t.open();const a=await o;return{key:a.s+
electedType==="custom"?a.selectedInputKey:a.selectedKey,value:a.selectedValue}},addFilter:async function e(t){const{controller:o,dialog:a,promise:r}=await this.createDialog({fragmentName:"AddFilterDialog",controllerClass:w});const n=o.getModel("dialog");+
n.setProperty("/properties",t.filter(e=>e.name.toLowerCase()!=="delete_mc"&&e.name.toLowerCase()!=="update_mc"&&e.name.toLowerCase()!=="create_mc").map(e=>({key:e.name,text:e.name})));a.open();const l=await r;return{property:l.selectedProperty,operator:l+
.selectedOperator,value:l.selectedValue}},editFilter:async function e(t,o){const{controller:a,dialog:r,promise:n}=await this.createDialog({fragmentName:"AddFilterDialog",controllerClass:M});const l=a.getModel("dialog");l.setProperty("/properties",o.filte+
r(e=>e.name.toLowerCase()!=="delete_mc"&&e.name.toLowerCase()!=="update_mc"&&e.name.toLowerCase()!=="create_mc").map(e=>({key:e.name,text:e.name})));l.setProperty("/selectedProperty",t.property);l.setProperty("/selectedOperator",t.operator);l.setProperty+
("/selectedValue",t.value);r.open();const i=await n;return{property:i.selectedProperty,operator:i.selectedOperator,value:i.selectedValue}},showConfirmationDialog:async function e(t){const{controller:o,dialog:a,promise:r}=await this.createDialog({fragment+
Name:"ConfirmationDialog",controllerClass:A});const n=o.getModel("dialog");n.setProperty("/message",t);a.open();const l=await r;return l.confirmed},showUpdateAvailableDialog:async function e(){const t=this.component.getModel("info");const o=t.getData();c+
onst{controller:a,dialog:r}=await this.createDialog({fragmentName:"UpdateAvailableDialog",controllerClass:L});const n=a.getModel("dialog");n.setProperty("/currentVersion",o.Version);n.setProperty("/latestVersion",o.RemoteVersion);n.setProperty("/releaseN+
otes",o.LatestReleaseBody||"No release notes available.");r.open()},showAboutDialog:async function e(){const t=this.component.getModel("info");const o=t.getData();const{controller:a,dialog:r,promise:n}=await this.createDialog({fragmentName:"AboutDialog",+
controllerClass:C});const l=a.getModel("dialog");l.setProperty("/Version",o.Version);l.setProperty("/RemoteVersion",o.RemoteVersion);l.setProperty("/UpdateAvailable",o.UpdateAvailable);l.setProperty("/Logo",sap.ui.require.toUrl("de/kernich/odpu/img/odapu+
-logo.png"));r.open();return n},selectProjectType:async function e(){const{dialog:t,promise:o}=await this.createDialog({fragmentName:"SelectProjectType",controllerClass:j});t.open();const a=await o;return a.selectedType},addSort:async function e(t){const+
{controller:o,dialog:a,promise:r}=await this.createDialog({fragmentName:"AddSortDialog",controllerClass:v});const n=o.getModel("dialog");n.setProperty("/properties",t.filter(e=>e.name.toLowerCase()!=="delete_mc"&&e.name.toLowerCase()!=="update_mc"&&e.nam+
e.toLowerCase()!=="create_mc").map(e=>({key:e.name,text:e.name})));a.open();const l=await r;return{property:l.selectedProperty,direction:l.selectedDirection}},showXmlCodeEditor:async function t(o){const{dialog:a,promise:r}=await this.createDialog({fragme+
ntName:"XmlCodeEditor",controllerClass:class extends T{data={xml:"",viewMode:"xml",odataClient:o,entities:[],functions:[],actions:[],complexTypes:[]};onInit(){this.data.xml=_.formatXml(o.getMetadataText());this.data.entities=o.getEntities()||[];this.data+
.functions=o.getFunctions()||[];this.data.actions=o.getActions()||[];this.data.complexTypes=o.getComplexTypes()||[]}onEntityPreview(){}onCopy(){void _.copy2Clipboard(this.data.xml);e.show(this.getText("msg.copiedToClipboard"))}onDownload(){void _.downloa+
d(this.data.xml,"metadata.xml")}}});a.open();return r},showProjectListDialog:async function e(){const t=await this.requests.getProjects();const{controller:o,dialog:a,promise:r}=await this.createDialog({fragmentName:"ProjectListDialog",controllerClass:x})+
;const n=o.getModel("dialog");n.setProperty("/projects",t);a.open();const l=await r;return l.selectedProject},showSaveProjectDialog:async function e(){const{dialog:t,promise:o}=await this.createDialog({fragmentName:"SaveProjectDialog",controllerClass:b})+
;t.open();const a=await o;return a.projectName},getDialogId:function e(t){const o=`${this.getMetadata().getName().replace(/\./g,"")}--${t.fragmentName.replace(/\//g,"")}`;if(t.id){return`${o}--${t.id}`}return o},createDialog:async function e(t){const o=t+
.id||t.fragmentName;const a=this.getDialogId(t);const r=new t.controllerClass;const n=this.component.getModel("info");const l=this.component.getModel("i18n");await r.init({path:this.fragmentPath+"/"+t.fragmentName,name:o,id:a,dialogManager:this,requests:+
this.requests,bundle:this.component.bundle});const i=await r.initPromise();r.dialog.setModel(l,"i18n");r.dialog.setModel(n,"info");r.dialog.attachAfterOpen(()=>{r.onAfterOpen()});r.dialog.setEscapeHandler(()=>{r.onCancel()});r.onInit();return{controller:+
r,dialog:r.dialog,promise:i.promise}}});return F});                                                                                                                                                                                                            
//# sourceMappingURL=DialogManager.js.map                                                                                                                                                                                                                      