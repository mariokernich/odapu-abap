sap.ui.define(["sap/ui/model/odata/v4/ODataModel","./ODataHelper","sap/m/MessageBox"],function(t,e,a){"use strict";function r(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const n=r(e);class i{constructor(e){let r=e;if(!r.endsWith+
("/")){r+="/"}this.serviceUrl=r;this.model=new t({serviceUrl:r,synchronizationMode:"None",earlyRequests:true,httpHeaders:{}});this.model.attachDataReceived({},t=>{const e=t.getParameters();if(e.error?.status>=400){const t="Requested failed: "+e.error.req+
uestUrl+"\n\nMessage: "+e.error.message;a.error(t)}})}getActions(){const t=[];const e=Array.from(this.metadataXml.getElementsByTagName("Action")).map(t=>({Name:t.getAttribute("Name"),IsBound:t.getAttribute("IsBound"),Parameters:Array.from(t.getElementsBy+
TagName("Parameter")).map(t=>({Name:t.getAttribute("Name"),Type:t.getAttribute("Type"),Nullable:t.getAttribute("Nullable")}))}));for(const a of e){t.push({name:a.Name,isBound:a.IsBound==="true",parameters:a.Parameters.map(t=>({name:t.Name,type:t.Type,nul+
lable:t.Nullable==="true"}))})}return t}destroy(){}async createEntity(t){const e=this.model.bindList(`/${t.entityName}`,undefined,[],[],{$$getKeepAliveContext:true});const a=e.create(t.properties);await a.created()}deleteEntity(t){const e=Object.entries(+
t.keys).map(t=>{let[e,a]=t;return`${e}='${a}'`}).join(",");const a=this.model.getKeepAliveContext(`/${t.entityName}(${e})`);return a.delete()}async getEntity(t){const e=Object.entries(t.keys).map(t=>{let[e,a]=t;return`${e}='${a}'`}).join(",");const a=thi+
s.model.bindContext(`/${t.entityName}(${e})`);const r=await a.requestObject();if(r===undefined){throw new Error("Entity not found")}return r}getEntities(){const t=[];const e=Array.from(this.metadataXml.getElementsByTagName("EntitySet")).map(t=>({Name:t.g+
etAttribute("Name"),EntityType:t.getAttribute("EntityType")}));for(const a of e){let e=a.EntityType;if(e.includes(".")){e=e.split(".").pop()}const r=Array.from(this.metadataXml.getElementsByTagName("EntityType")).find(t=>t.getAttribute("Name")===e);const+
 i=Array.from(r.getElementsByTagName("Property")).map(t=>({name:t.getAttribute("Name"),type:t.getAttribute("Type"),nullable:t.getAttribute("Nullable"),maxLength:n.getMaxLength(t.getAttribute("MaxLength"))}));const m=r.getElementsByTagName("Key")[0];const+
 s=Array.from(m.getElementsByTagName("PropertyRef")).map(t=>({name:t.getAttribute("Name"),type:i.find(e=>e.name===t.getAttribute("Name")).type,nullable:i.find(e=>e.name===t.getAttribute("Name")).nullable,maxLength:i.find(e=>e.name===t.getAttribute("Name"+
)).maxLength}));t.push({name:a.Name,entityType:e,properties:i,keys:s})}return t}getFunctions(){const t=Array.from(this.metadataXml.getElementsByTagName("FunctionImport")).map(t=>({Name:t.getAttribute("Name"),ReturnType:t.getAttribute("ReturnType"),Entity+
Set:t.getAttribute("EntitySet"),HttpMethod:t.getAttribute("m:HttpMethod")}));return t.map(t=>{const e=Array.from(this.metadataXml.getElementsByTagName("Parameter")).map(t=>({name:t.getAttribute("Name"),type:t.getAttribute("Type"),nullable:t.getAttribute(+
"Nullable"),maxLength:n.getMaxLength(t.getAttribute("MaxLength"))}));return{name:t.Name,returnType:t.ReturnType,entitySet:t.EntitySet,parameters:e,method:t.HttpMethod}})}async readEntity(t){const e=this.model.bindList("/"+t.entityName,undefined,[],[],{})+
;const a=await e.requestContexts();return a.map(t=>t.getObject())}getModel(){return this.model}getMetadataText(){return this.metadataText}getMetadataXml(){return this.metadataXml}async initAsync(){this.metadataText=await n.getMetadataText(this.serviceUrl+
);this.metadataXml=n.parseMetadataXml(this.metadataText)}executeFunction(t){throw new Error("Not implemented")}executeAction(t){throw new Error("Not implemented")}}return i});                                                                                
//# sourceMappingURL=OData4Client.js.map                                                                                                                                                                                                                       