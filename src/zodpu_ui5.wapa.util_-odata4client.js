sap.ui.define(["sap/ui/model/odata/v4/ODataModel","./ODataHelper","sap/m/MessageBox"],function(t,e,a){"use strict";function n(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const r=n(e);class i{constructor(e){let n=e;if(!n.endsWith+
("/")){n+="/"}this.serviceUrl=n;this.model=new t({serviceUrl:n,synchronizationMode:"None",earlyRequests:true,httpHeaders:{}});this.model.attachDataReceived({},t=>{const e=t.getParameters();if(e.error?.status>=400){const t="Requested failed: "+e.error.req+
uestUrl+"\n\nMessage: "+e.error.message;a.error(t)}})}getActions(){const t=[];const e=Array.from(this.metadataXml.getElementsByTagName("Action")).map(t=>({Name:t.getAttribute("Name"),IsBound:t.getAttribute("IsBound"),Parameters:Array.from(t.getElementsBy+
TagName("Parameter")).map(t=>({Name:t.getAttribute("Name"),Type:t.getAttribute("Type"),Nullable:t.getAttribute("Nullable")}))}));for(const a of e){t.push({name:a.Name,isBound:a.IsBound==="true",parameters:a.Parameters.map(t=>({name:t.Name,type:t.Type,nul+
lable:t.Nullable==="true"}))})}return t}destroy(){}async createEntity(t){const e=this.model.bindList(`/${t.entityName}`,undefined,[],[],{$$getKeepAliveContext:true});const a=e.create(t.properties);await a.created()}deleteEntity(t){const e=Object.entries(+
t.keys).map(([t,e])=>`${t}='${e}'`).join(",");const a=this.model.getKeepAliveContext(`/${t.entityName}(${e})`);return a.delete()}async getEntity(t){const e=Object.entries(t.keys).map(([t,e])=>`${t}='${e}'`).join(",");const a=this.model.bindContext(`/${t.+
entityName}(${e})`);const n=await a.requestObject();if(n===undefined){throw new Error("Entity not found")}return n}getEntities(){const t=[];const e=Array.from(this.metadataXml.getElementsByTagName("EntitySet")).map(t=>({Name:t.getAttribute("Name"),Entity+
Type:t.getAttribute("EntityType")}));for(const a of e){let e=a.EntityType;if(e.includes(".")){e=e.split(".").pop()}const n=Array.from(this.metadataXml.getElementsByTagName("EntityType")).find(t=>t.getAttribute("Name")===e);const i=Array.from(n.getElement+
sByTagName("Property")).map(t=>({name:t.getAttribute("Name"),type:t.getAttribute("Type"),nullable:t.getAttribute("Nullable"),maxLength:r.getMaxLength(t.getAttribute("MaxLength"))}));const m=n.getElementsByTagName("Key")[0];const s=Array.from(m.getElement+
sByTagName("PropertyRef")).map(t=>({name:t.getAttribute("Name"),type:i.find(e=>e.name===t.getAttribute("Name")).type,nullable:i.find(e=>e.name===t.getAttribute("Name")).nullable,maxLength:i.find(e=>e.name===t.getAttribute("Name")).maxLength}));t.push({na+
me:a.Name,entityType:e,properties:i,keys:s})}return t}getFunctions(){const t=Array.from(this.metadataXml.getElementsByTagName("FunctionImport")).map(t=>({Name:t.getAttribute("Name"),ReturnType:t.getAttribute("ReturnType"),EntitySet:t.getAttribute("Entity+
Set"),HttpMethod:t.getAttribute("m:HttpMethod")}));return t.map(t=>{const e=Array.from(this.metadataXml.getElementsByTagName("Parameter")).map(t=>({name:t.getAttribute("Name"),type:t.getAttribute("Type"),nullable:t.getAttribute("Nullable"),maxLength:r.ge+
tMaxLength(t.getAttribute("MaxLength"))}));return{name:t.Name,returnType:t.ReturnType,entitySet:t.EntitySet,parameters:e,method:t.HttpMethod}})}async readEntity(t){const e=this.model.bindList("/"+t.entityName,undefined,[],[],{});const a=await e.requestCo+
ntexts();return a.map(t=>t.getObject())}getModel(){return this.model}getMetadataText(){return this.metadataText}getMetadataXml(){return this.metadataXml}async initAsync(){this.metadataText=await r.getMetadataText(this.serviceUrl);this.metadataXml=r.parse+
MetadataXml(this.metadataText)}executeFunction(t){throw new Error("Not implemented")}executeAction(t){throw new Error("Not implemented")}}return i});                                                                                                          
//# sourceMappingURL=OData4Client.js.map                                                                                                                                                                                                                       