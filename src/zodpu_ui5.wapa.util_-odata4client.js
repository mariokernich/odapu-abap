sap.ui.define(["sap/ui/model/odata/v4/ODataModel","./ODataHelper","sap/m/MessageBox","./SoundManager"],function(t,e,a,r){"use strict";function n(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const i=n(e);const s=n(r);class m{const+
ructor(e){let r=e;if(!r.endsWith("/")){r+="/"}this.serviceUrl=r;this.model=new t({serviceUrl:r,synchronizationMode:"None",earlyRequests:true,httpHeaders:{}});this.model.attachDataReceived({},t=>{const e=t.getParameters();if(e.error?.status>=400){const t=+
"Requested failed: "+e.error.requestUrl+"\n\nMessage: "+e.error.message;void s.FireError();a.error(t)}})}getActions(){const t=[];const e=Array.from(this.metadataXml.getElementsByTagName("Action")).map(t=>({Name:t.getAttribute("Name"),IsBound:t.getAttribu+
te("IsBound"),Parameters:Array.from(t.getElementsByTagName("Parameter")).map(t=>({Name:t.getAttribute("Name"),Type:t.getAttribute("Type"),Nullable:t.getAttribute("Nullable")}))}));for(const a of e){t.push({name:a.Name,isBound:a.IsBound==="true",parameter+
s:a.Parameters.map(t=>({name:t.Name,type:t.Type,nullable:t.Nullable==="true"}))})}return t}getComplexTypes(){const t=[];const e=Array.from(this.metadataXml.getElementsByTagName("ComplexType"));for(const a of e){const e=a.getAttribute("Name");if(!e)contin+
ue;const r=Array.from(a.getElementsByTagName("Property")).map(t=>({name:t.getAttribute("Name")||"",type:t.getAttribute("Type")||"",nullable:t.getAttribute("Nullable")||"",maxLength:i.getMaxLength(t.getAttribute("MaxLength")||"")}));t.push({name:e,propert+
ies:r})}return t.filter(t=>!t.name.startsWith("SAP__"))}getAssociations(){return[]}destroy(){}async createEntity(t){const e=this.model.bindList(`/${t.entityName}`,undefined,[],[],{$$getKeepAliveContext:true});const a=e.create(t.properties);await a.create+
d();await s.FireSuccess()}async deleteEntity(t){const e=Object.entries(t.keys).map(([t,e])=>`${t}='${e}'`).join(",");const a=this.model.getKeepAliveContext(`/${t.entityName}(${e})`);await a.delete();await s.FireSuccess()}async getEntity(t){const e=Object+
.entries(t.keys).map(([t,e])=>`${t}='${e}'`).join(",");const a=this.model.bindContext(`/${t.entityName}(${e})`);const r=await a.requestObject();if(r===undefined){throw new Error("Entity not found")}await s.FireSuccess();return r}getEntities(){const t=[];+
const e=Array.from(this.metadataXml.getElementsByTagName("EntitySet")).map(t=>({Name:t.getAttribute("Name"),EntityType:t.getAttribute("EntityType")}));for(const a of e){let e=a.EntityType;if(e.includes(".")){e=e.split(".").pop()}const r=Array.from(this.m+
etadataXml.getElementsByTagName("EntityType")).find(t=>t.getAttribute("Name")===e);const n=Array.from(r.getElementsByTagName("Property")).map(t=>({name:t.getAttribute("Name"),type:t.getAttribute("Type"),nullable:t.getAttribute("Nullable"),maxLength:i.get+
MaxLength(t.getAttribute("MaxLength"))}));const s=r.getElementsByTagName("Key")[0];const m=Array.from(s.getElementsByTagName("PropertyRef")).map(t=>({name:t.getAttribute("Name"),type:n.find(e=>e.name===t.getAttribute("Name")).type,nullable:n.find(e=>e.na+
me===t.getAttribute("Name")).nullable,maxLength:n.find(e=>e.name===t.getAttribute("Name")).maxLength}));const o=Array.from(r.getElementsByTagName("NavigationProperty")).map(t=>({name:t.getAttribute("Name")||"",relationship:t.getAttribute("Relationship")|+
|"",fromRole:t.getAttribute("FromRole")||"",toRole:t.getAttribute("ToRole")||""}));t.push({name:a.Name,entityType:e,properties:n,keys:m,navigationProperties:o})}return t}getFunctions(){const t=Array.from(this.metadataXml.getElementsByTagName("FunctionImp+
ort")).map(t=>({Name:t.getAttribute("Name"),ReturnType:t.getAttribute("ReturnType"),EntitySet:t.getAttribute("EntitySet"),HttpMethod:t.getAttribute("m:HttpMethod")}));return t.map(t=>{const e=Array.from(this.metadataXml.getElementsByTagName("Parameter"))+
.map(t=>({name:t.getAttribute("Name"),type:t.getAttribute("Type"),nullable:t.getAttribute("Nullable"),maxLength:i.getMaxLength(t.getAttribute("MaxLength"))}));return{name:t.Name,returnType:t.ReturnType,entitySet:t.EntitySet,parameters:e,method:t.HttpMeth+
od}})}async readEntity(t){const e=this.model.bindList("/"+t.entityName,undefined,t.filters,t.sorting,{...t.expand&&t.expand.length>0&&{$expand:t.expand.join(",")}});const a=await e.requestContexts();const r=a.map(t=>t.getObject());await s.FireSuccess();r+
eturn r}getModel(){return this.model}getMetadataText(){return this.metadataText}getMetadataXml(){return this.metadataXml}async initAsync(){this.metadataText=await i.getMetadataText(this.serviceUrl);this.metadataXml=i.parseMetadataXml(this.metadataText)}e+
xecuteFunction(t){throw new Error("Not implemented")}executeAction(t){throw new Error("Not implemented")}}return m});                                                                                                                                          
//# sourceMappingURL=OData4Client.js.map                                                                                                                                                                                                                       