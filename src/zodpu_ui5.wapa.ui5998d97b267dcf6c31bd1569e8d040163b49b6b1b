sap.ui.define(["sap/m/MessageBox", "sap/ui/core/UIComponent", "sap/ui/Device", "sap/ui/model/json/JSONModel", "./util/DialogManager", "./util/ODataRequests", "./util/SoundManager"], function (MessageBox, UIComponent, Device, JSONModel, __DialogManager, _+
_ODataRequests, __SoundManager) {                                                                                                                                                                                                                              
  "use strict";                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
  function _interopRequireDefault(obj) {                                                                                                                                                                                                                       
    return obj && obj.__esModule && typeof obj.default !== "undefined" ? obj.default : obj;                                                                                                                                                                    
  }                                                                                                                                                                                                                                                            
  const DialogManager = _interopRequireDefault(__DialogManager);                                                                                                                                                                                               
  const ODataRequests = _interopRequireDefault(__ODataRequests);                                                                                                                                                                                               
  const SoundManager = _interopRequireDefault(__SoundManager);                                                                                                                                                                                                 
  /**                                                                                                                                                                                                                                                          
   * @namespace de.kernich.odpu                                                                                                                                                                                                                                
   */                                                                                                                                                                                                                                                          
  const Component = UIComponent.extend("de.kernich.odpu.Component", {                                                                                                                                                                                          
    constructor: function constructor() {                                                                                                                                                                                                                      
      UIComponent.prototype.constructor.apply(this, arguments);                                                                                                                                                                                                
      this.contentDensityClass = "";                                                                                                                                                                                                                           
    },                                                                                                                                                                                                                                                         
    metadata: {                                                                                                                                                                                                                                                
      manifest: "json"                                                                                                                                                                                                                                         
    },                                                                                                                                                                                                                                                         
    init: function _init() {                                                                                                                                                                                                                                   
      UIComponent.prototype.init.call(this);                                                                                                                                                                                                                   
      this.setModel(new JSONModel(Device), "device");                                                                                                                                                                                                          
      this.dialogManager = new DialogManager(this);                                                                                                                                                                                                            
      this.model = this.getModel();                                                                                                                                                                                                                            
      this.requests = new ODataRequests(this.model);                                                                                                                                                                                                           
      void this.handleInitAsync();                                                                                                                                                                                                                             
    },                                                                                                                                                                                                                                                         
    handleInitAsync: async function _handleInitAsync() {                                                                                                                                                                                                       
      this.registerErrorHandler(this.model);                                                                                                                                                                                                                   
      this.setIconModel();                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
      // Initialize SoundManager to preload audio files                                                                                                                                                                                                        
      SoundManager.initialize();                                                                                                                                                                                                                               
      this.bundle = await this.getModel("i18n").getResourceBundle();                                                                                                                                                                                           
      this.getRouter().initialize();                                                                                                                                                                                                                           
    },                                                                                                                                                                                                                                                         
    registerErrorHandler: function _registerErrorHandler(model) {                                                                                                                                                                                              
      model.attachRequestFailed({}, event => {                                                                                                                                                                                                                 
        const parameters = event.getParameters();                                                                                                                                                                                                              
        const responseText = parameters.response.responseText;                                                                                                                                                                                                 
        if (responseText.startsWith("<?xml")) {                                                                                                                                                                                                                
          // Handle XML response                                                                                                                                                                                                                               
          const parser = new DOMParser();                                                                                                                                                                                                                      
          const xmlDoc = parser.parseFromString(responseText, "text/xml");                                                                                                                                                                                     
          const messageNode = xmlDoc.getElementsByTagName("message")[0];                                                                                                                                                                                       
          if (messageNode && messageNode.textContent) {                                                                                                                                                                                                        
            MessageBox.error(messageNode.textContent);                                                                                                                                                                                                         
          } else {                                                                                                                                                                                                                                             
            MessageBox.error("Unknown error occurred");                                                                                                                                                                                                        
          }                                                                                                                                                                                                                                                    
        } else {                                                                                                                                                                                                                                               
          // Handle JSON response                                                                                                                                                                                                                              
          const json = JSON.parse(responseText);                                                                                                                                                                                                               
          MessageBox.error(json.error.message.value);                                                                                                                                                                                                          
        }                                                                                                                                                                                                                                                      
      });                                                                                                                                                                                                                                                      
    },                                                                                                                                                                                                                                                         
    getText: function _getText(key, args) {                                                                                                                                                                                                                    
      return this.bundle.getText(key, args) ?? key;                                                                                                                                                                                                            
    },                                                                                                                                                                                                                                                         
    setIconModel: function _setIconModel() {                                                                                                                                                                                                                   
      this.setModel(new JSONModel({                                                                                                                                                                                                                            
        githubIcon: sap.ui.require.toUrl("de/kernich/odpu/img/github-brands.svg"),                                                                                                                                                                             
        linkedinIcon: sap.ui.require.toUrl("de/kernich/odpu/img/linkedin-brands.svg"),                                                                                                                                                                         
        odapuIcon: sap.ui.require.toUrl("de/kernich/odpu/img/odapu-logo.png")                                                                                                                                                                                  
      }), "icons");                                                                                                                                                                                                                                            
    },                                                                                                                                                                                                                                                         
    /**                                                                                                                                                                                                                                                        
     * This method can be called to determine whether the sapUiSizeCompact or sapUiSizeCozy                                                                                                                                                                    
     * design mode class should be set, which influences the size appearance of some controls.                                                                                                                                                                 
     * @public                                                                                                                                                                                                                                                 
     * @returns css class, either 'sapUiSizeCompact' or 'sapUiSizeCozy' - or an empty string if no css class should be set                                                                                                                                     
     */                                                                                                                                                                                                                                                        
    getContentDensityClass: function _getContentDensityClass() {                                                                                                                                                                                               
      if (this.contentDensityClass === undefined) {                                                                                                                                                                                                            
        // check whether FLP has already set the content density class; do nothing in this case                                                                                                                                                                
        if (document.body.classList.contains("sapUiSizeCozy") || document.body.classList.contains("sapUiSizeCompact")) {                                                                                                                                       
          this.contentDensityClass = "";                                                                                                                                                                                                                       
        } else if (!Device.support.touch) {                                                                                                                                                                                                                    
          // apply "compact" mode if touch is not supported                                                                                                                                                                                                    
          this.contentDensityClass = "sapUiSizeCompact";                                                                                                                                                                                                       
        } else {                                                                                                                                                                                                                                               
          // "cozy" in case of touch support; default for most sap.m controls, but needed for desktop-first controls like sap.ui.table.Table                                                                                                                   
          this.contentDensityClass = "sapUiSizeCozy";                                                                                                                                                                                                          
        }                                                                                                                                                                                                                                                      
      }                                                                                                                                                                                                                                                        
      return this.contentDensityClass;                                                                                                                                                                                                                         
    }                                                                                                                                                                                                                                                          
  });                                                                                                                                                                                                                                                          
  return Component;                                                                                                                                                                                                                                            
});                                                                                                                                                                                                                                                            
//# sourceMappingURL=Component-dbg.js.map                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               