{"version":3,"file":"ProjectListDialogController-dbg.js","names":["DialogController","_interopRequireDefault","__DialogController","ProjectListDialogController","extend","constructor","prototype","apply","arguments","data","projects","selectedProject","o+
nSearch","_onSearch","event","query","getParameter","toLowerCase","table","getElement","binding","getBinding","filter","Filter","FilterOperator","Contains","updateDialogTitle","onLoad","_onLoad","selectedItem","getSelectedItem","MessageToast","show","bin+
dingContext","getBindingContext","project","getObject","onConfirm","onDelete","_onDelete","source","getSource","listItem","getParent","confirmed","dialogManager","showConfirmationDialog","ProjectName","dialog","setBusy","requests","deleteProject","index"+
,"findIndex","p","splice","error","errorMessage","Error","message","String","MessageBox","_updateDialogTitle","filteredLength","getLength","setTitle"],"sources":["ProjectListDialogController.ts"],"sourcesContent":["import DialogController from \"../../ut+
il/DialogController\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport Table from \"sap/m/Table\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOpera+
tor\";\nimport { Project } from \"../../Types\";\nimport { Input$LiveChangeEvent } from \"sap/m/Input\";\nimport ListBinding from \"sap/ui/model/ListBinding\";\nimport ListItem from \"sap/ui/core/ListItem\";\nimport { Button$PressEvent } from \"sap/m/But+
ton\";\nimport { SearchField$LiveChangeEvent } from \"sap/m/SearchField\";\n\n/**\n * @namespace de.kernich.odpu.controller.dialog\n */\nexport default class ProjectListDialogController extends DialogController {\n    data = {\n        projects: [] as Pr+
oject[],\n        selectedProject: null as Project | null\n    };\n\n    public onSearch(event: SearchField$LiveChangeEvent): void {\n        const query = event.getParameter(\"newValue\")?.toLowerCase() ?? \"\";\n        const table = this.getElement<Ta+
ble>(\"idProjectsTable\");\n        const binding = table.getBinding(\"items\") as ListBinding;\n        \n        if (binding) {\n            binding.filter(\n                query\n                    ? new Filter(\"ProjectName\", FilterOperator.Contai+
ns, query)\n                    : []\n            );\n            this.updateDialogTitle();\n        }\n    }\n\n    public onLoad(): void {\n        const table = this.getElement<Table>(\"idProjectsTable\");\n        const selectedItem = table.getSelect+
edItem();\n        \n        if (!selectedItem) {\n            MessageToast.show(\"Please select a project\");\n            return;\n        }\n\n        const bindingContext = selectedItem.getBindingContext(\"dialog\");\n        if (!bindingContext) {\n+
            return;\n        }\n\n        const project = bindingContext.getObject() as Project;\n        this.data.selectedProject = project;\n        this.onConfirm();\n    }\n\n    public async onDelete(event: Button$PressEvent): Promise<void> {\n    +
    const source = event.getSource();\n        const listItem = source.getParent()?.getParent() as ListItem;\n        const bindingContext = listItem.getBindingContext(\"dialog\");\n        \n        if (!bindingContext) {\n            return;\n        }+
\n\n        const project = bindingContext.getObject() as Project;\n        const confirmed = await this.dialogManager.showConfirmationDialog(\n            `Are you sure you want to delete project \"${project.ProjectName}\"?`\n        );\n\n        if (c+
onfirmed) {\n            this.dialog.setBusy(true);\n            try {\n                await this.requests.deleteProject(project);\n                MessageToast.show(\"Project deleted successfully\");\n\n                const index = this.data.projects.+
findIndex(\n                    (p) => p.ProjectName === project.ProjectName\n                );\n                if (index > -1) {\n                    this.data.projects.splice(index, 1);\n                    this.updateDialogTitle();\n                +
}\n            } catch (error: unknown) {\n                const errorMessage = error instanceof Error ? error.message : String(error);\n                MessageBox.error(`Error deleting project: ${errorMessage}`);\n            } finally {\n              +
  this.dialog.setBusy(false);\n            }\n        }\n    }\n\n    private updateDialogTitle(): void {\n        const table = this.getElement<Table>(\"idProjectsTable\");\n        const binding = table.getBinding(\"items\") as ListBinding;\n        co+
nst filteredLength = binding ? binding.getLength() : 0;\n        this.dialog.setTitle(`Saved Projects (${filteredLength})`);\n    }\n} "],"mappings":"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","ignoreList":[]}                                                                                                          