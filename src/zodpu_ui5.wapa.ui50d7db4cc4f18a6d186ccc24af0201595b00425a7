{"version":3,"file":"ProjectListDialogController-dbg.js","names":["DialogController","_interopRequireDefault","__DialogController","ProjectListDialogController","extend","constructor","prototype","apply","arguments","data","projects","selectedProject","o+
nSearch","_onSearch","event","query","getParameter","toLowerCase","list","getElement","binding","getBinding","filter","Filter","FilterOperator","Contains","updateDialogTitle","onLoad","_onLoad","selectedItem","getSelectedItem","MessageToast","show","getT+
ext","bindingContext","getBindingContext","project","getObject","onConfirm","refresh","_refresh","dialog","setBusy","requests","getProjects","model","getModel","setProperty","onAfterOpen","_onAfterOpen","DialogController.prototype.onAfterOpen.call","onDe+
lete","_onDelete","source","getSource","customData","getCustomData","projectData","find","getKey","getValue","confirmed","dialogManager","showConfirmationDialog","ProjectName","deleteProject","error","errorMessage","Error","message","String","MessageBox"+
,"_updateDialogTitle","filteredLength","getLength","title","setTitle"],"sources":["ProjectListDialogController.ts"],"sourcesContent":["import DialogController from \"../../util/DialogController\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport+
 MessageBox from \"sap/m/MessageBox\";\nimport List from \"sap/m/List\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport { Project } from \"../../Types\";\nimport ListBinding from \"sap/ui+
/model/ListBinding\";\nimport { Button$PressEvent } from \"sap/m/Button\";\nimport { SearchField$LiveChangeEvent } from \"sap/m/SearchField\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\n/**\n * @namespace de.kernich.odpu.controller.dialog+
\n */\nexport default class ProjectListDialogController extends DialogController {\n\tdata = {\n\t\tprojects: [] as Project[],\n\t\tselectedProject: null as Project | null,\n\t};\n\n\tpublic onSearch(event: SearchField$LiveChangeEvent): void {\n\t\tconst+
 query = event.getParameter(\"newValue\")?.toLowerCase() ?? \"\";\n\t\tconst list = this.getElement<List>(\"idProjectsList\");\n\t\tconst binding = list.getBinding(\"items\") as ListBinding;\n\n\t\tif (binding) {\n\t\t\tbinding.filter(\n\t\t\t\tquery ? n+
ew Filter(\"ProjectName\", FilterOperator.Contains, query) : []\n\t\t\t);\n\t\t\tthis.updateDialogTitle();\n\t\t}\n\t}\n\n\tpublic onLoad(): void {\n\t\tconst list = this.getElement<List>(\"idProjectsList\");\n\t\tconst selectedItem = list.getSelectedIte+
m();\n\n\t\tif (!selectedItem) {\n\t\t\tMessageToast.show(this.getText(\"msg.selectProject\"));\n\t\t\treturn;\n\t\t}\n\n\t\tconst bindingContext = selectedItem.getBindingContext(\"dialog\");\n\t\tif (!bindingContext) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst+
 project = bindingContext.getObject() as Project;\n\t\tthis.data.selectedProject = project;\n\t\tthis.onConfirm();\n\t}\n\n\tpublic async refresh() {\n\t\tthis.dialog.setBusy(true);\n\t\ttry {\n\t\t\tconst projects = await this.requests.getProjects();\n\+
t\t\tconst model = this.dialog.getModel(\"dialog\") as JSONModel;\n\t\t\tmodel.setProperty(\"/projects\", projects);\n\t\t\tmodel.refresh(true);\n\t\t} finally {\n\t\t\tthis.dialog.setBusy(false);\n\t\t}\n\t}\n\n\tpublic onAfterOpen(): void {\n\t\tsuper.+
onAfterOpen();\n\t\tthis.updateDialogTitle();\n\t}\n\n\tpublic async onDelete(event: Button$PressEvent): Promise<void> {\n\t\tconst source = event.getSource();\n\n\t\t// Get project data from custom data\n\t\tconst customData = source.getCustomData();\n\+
t\tconst projectData = customData.find((data) => data.getKey() === \"project\");\n\n\t\tif (!projectData) {\n\t\t\tconsole.error(\"Could not find project data in custom data\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst project = projectData.getValue() as Proje+
ct;\n\t\tconst confirmed = await this.dialogManager.showConfirmationDialog(\n\t\t\t`Are you sure you want to delete project \"${project.ProjectName}\"?`\n\t\t);\n\n\t\tif (confirmed) {\n\t\t\tthis.dialog.setBusy(true);\n\t\t\ttry {\n\t\t\t\tawait this.re+
quests.deleteProject(project);\n\t\t\t\tMessageToast.show(this.getText(\"msg.projectDeleted\"));\n\n\t\t\t\tawait this.refresh();\n\n\t\t\t\tthis.updateDialogTitle();\n\t\t\t} catch (error: unknown) {\n\t\t\t\tconst errorMessage =\n\t\t\t\t\terror instan+
ceof Error ? error.message : String(error);\n\t\t\t\tMessageBox.error(`Error deleting project: ${errorMessage}`);\n\t\t\t} finally {\n\t\t\t\tthis.dialog.setBusy(false);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate updateDialogTitle(): void {\n\t\tconst list = this+
.getElement<List>(\"idProjectsList\");\n\t\tconst binding = list.getBinding(\"items\") as ListBinding;\n\t\tconst filteredLength = binding ? binding.getLength() : 0;\n\t\tconst title = this.getText(\"dlg.title.savedProjects\");\n\t\tthis.dialog.setTitle(+
`${title} (${filteredLength})`);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}                               