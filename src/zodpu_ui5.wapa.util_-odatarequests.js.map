{"version":3,"file":"ODataRequests.js","names":["Constants","_interopRequireDefault","__Constants","ODataRequests","ManagedObject","extend","constructor","_constructor","model","ManagedObject.prototype.constructor.call","this","getModel","_getModel","get+
Services","async","_getServices","options","refresh","cachedServices","getCachedServices","Promise","resolve","reject","read","success","data","setCachedServices","results","error","urlParameters","$top","SERVICE_QUERY_LIMIT","toString","getInfo","_getIn+
fo","getPushChannels","_getPushChannels","getProjects","_getProjects","createProject","_createProject","project","create","deleteProject","_deleteProject","sPath","createKey","ProjectName","remove","markAsFavorite","_markAsFavorite","callFunction","Servi+
cePath","servicePath","Value","isFavorite","method","CACHE_KEY","cachedData","localStorage","getItem","JSON","parse","services","setItem","stringify"],"sources":["ODataRequests.ts"],"sourcesContent":["import ManagedObject from \"sap/ui/base/ManagedObject+
\";\nimport Constants from \"../Constants\";\nimport { InfoEntity, Project, PushChannelEntity, ServiceEntity } from \"../Types\";\nimport ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\n\n/**\n * @namespace de.kernich.odpu.util\n */\nexport defaul+
t class ODataRequests extends ManagedObject {\n\tprivate model: ODataModel;\n\tprivate static readonly CACHE_KEY = \"odpu_cached_services\";\n\n\tconstructor(model: ODataModel) {\n\t\tsuper();\n\t\tthis.model = model;\n\t}\n\n\tpublic getModel(): ODataMo+
del {\n\t\treturn this.model;\n\t}\n\n\tprivate static getCachedServices(): ServiceEntity[] | null {\n\t\tconst cachedData = localStorage.getItem(ODataRequests.CACHE_KEY);\n\t\tif (!cachedData) {\n\t\t\treturn null;\n\t\t}\n\t\ttry {\n\t\t\treturn JSON.p+
arse(cachedData) as ServiceEntity[];\n\t\t} catch {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tprivate static setCachedServices(services: ServiceEntity[]): void {\n\t\tlocalStorage.setItem(ODataRequests.CACHE_KEY, JSON.stringify(services));\n\t}\n\n\tasync get+
Services(options: { refresh: boolean } = { refresh: false }): Promise<ServiceEntity[]> {\n\t\tif (!options.refresh) {\n\t\t\tconst cachedServices = ODataRequests.getCachedServices();\n\t\t\tif (cachedServices) {\n\t\t\t\treturn cachedServices;\n\t\t\t}\n+
\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.model.read(\"/ODataService\", {\n\t\t\t\tsuccess: (data: { results: ServiceEntity[] }) => {\n\t\t\t\t\tODataRequests.setCachedServices(data.results);\n\t\t\t\t\tresolve(data.results);\n\t+
\t\t\t},\n\t\t\t\terror: reject,\n\t\t\t\turlParameters: {\n\t\t\t\t\t$top: Constants.SERVICE_QUERY_LIMIT.toString(),\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tasync getInfo(): Promise<InfoEntity> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tt+
his.model.read(\"/Info\", {\n\t\t\t\tsuccess: (data: { results: InfoEntity[] }) => {\n\t\t\t\t\tresolve(data.results[0]);\n\t\t\t\t},\n\t\t\t\terror: reject,\n\t\t\t});\n\t\t});\n\t}\n\n\tasync getPushChannels(): Promise<PushChannelEntity[]> {\n\t\tretur+
n new Promise((resolve, reject) => {\n\t\t\tthis.model.read(\"/PushChannel\", {\n\t\t\t\tsuccess: (data: { results: PushChannelEntity[] }) => {\n\t\t\t\t\tresolve(data.results);\n\t\t\t\t},\n\t\t\t\terror: reject,\n\t\t\t\turlParameters: {\n\t\t\t\t\t$to+
p: Constants.SERVICE_QUERY_LIMIT.toString(),\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tasync getProjects(): Promise<Project[]> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.model.read(\"/ODataServiceProject\", {\n\t\t\t\tsuccess: (data: { +
\n\t\t\t\t\tresults: Project[]\n\t\t\t\t}) => {\n\t\t\t\t\tresolve(data.results as unknown as Project[]);\n\t\t\t\t},\n\t\t\t\terror: reject,\n\t\t\t});\n\t\t});\n\t}\n\n\tasync createProject(project: Project): Promise<void> {\n\t\treturn new Promise((re+
solve, reject) => {\n\t\t\tthis.model.create(\"/ODataServiceProject\", project, {\n\t\t\t\tsuccess: () => resolve(),\n\t\t\t\terror: reject\n\t\t\t});\n\t\t});\n\t}\n\t\n\tasync deleteProject(project: Project): Promise<void> {\n\t\treturn new Promise((re+
solve, reject) => {\n\t\t\tconst sPath = this.model.createKey(\"/ODataServiceProject\", {\n\t\t\t\tProjectName: project.ProjectName\n\t\t\t});\n\t\t\tthis.model.remove(sPath, {\n\t\t\t\tsuccess: () => resolve(),\n\t\t\t\terror: reject\n\t\t\t});\n\t\t});+
\n\t}\n\n\tasync markAsFavorite(options: {\n\t\tservicePath: string;\n\t\tisFavorite: boolean;\n\t}): Promise<void> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.model.callFunction(\"/mark_favorite\", {\n\t\t\t\tsuccess: () => resolve(),\n+
\t\t\t\terror: reject,\n\t\t\t\turlParameters: {\n\t\t\t\t\tProjectName: \"\",\n\t\t\t\t\tServicePath: options.servicePath,\n\t\t\t\t\tValue: options.isFavorite,\n\t\t\t\t},\n\t\t\t\tmethod: \"POST\",\n\t\t\t});\n\t\t});\n\t}\n}\n"],"mappings":"6KACOA,EA+
ASC,EAAAC,GAIhB,MAGqBC,EAAsBC,EAAaC,OAAA,sCAIvDC,YAAW,SAAAC,EAACC,GACXC,6BAAAC,MACAA,KAAKF,MAAQA,CACd,EAEOG,SAAQ,SAAAC,IACd,OAAOF,KAAKF,KACb,EAkBMK,YAAWC,eAAAC,EAACC,EAAgC,CAAEC,QAAS,QAC5D,IAAKD,EAAQC,QAAS,CACrB,MAAMC,EAAiBf,EAAcgB,oBACrC,GAAID,EAAgB,CAC+
nB,OAAOA,CACR,CACD,CAEA,OAAO,IAAIE,QAAQ,CAACC,EAASC,KAC5BZ,KAAKF,MAAMe,KAAK,gBAAiB,CAChCC,QAAUC,IACTtB,EAAcuB,kBAAkBD,EAAKE,SACrCN,EAAQI,EAAKE,UAEdC,MAAON,EACPO,cAAe,CACdC,KAAM9B,EAAU+B,oBAAoBC,eAIxC,EAEMC,QAAOnB,eAAAoB,IACZ,OAAO,IAAId,QAAQ,CAACC,EAASC,K+
AC5BZ,KAAKF,MAAMe,KAAK,QAAS,CACxBC,QAAUC,IACTJ,EAAQI,EAAKE,QAAQ,KAEtBC,MAAON,KAGV,EAEMa,gBAAerB,eAAAsB,IACpB,OAAO,IAAIhB,QAAQ,CAACC,EAASC,KAC5BZ,KAAKF,MAAMe,KAAK,eAAgB,CAC/BC,QAAUC,IACTJ,EAAQI,EAAKE,UAEdC,MAAON,EACPO,cAAe,CACdC,KAAM9B,EAAU+B,oBAAoBC,eAIx+
C,EAEMK,YAAWvB,eAAAwB,IAChB,OAAO,IAAIlB,QAAQ,CAACC,EAASC,KAC5BZ,KAAKF,MAAMe,KAAK,uBAAwB,CACvCC,QAAUC,IAGTJ,EAAQI,EAAKE,UAEdC,MAAON,KAGV,EAEMiB,cAAazB,eAAA0B,EAACC,GACnB,OAAO,IAAIrB,QAAQ,CAACC,EAASC,KAC5BZ,KAAKF,MAAMkC,OAAO,uBAAwBD,EAAS,CAClDjB,QAASA,IAAM+
H,IACfO,MAAON,KAGV,EAEMqB,cAAa7B,eAAA8B,EAACH,GACnB,OAAO,IAAIrB,QAAQ,CAACC,EAASC,KAC5B,MAAMuB,EAAQnC,KAAKF,MAAMsC,UAAU,uBAAwB,CAC1DC,YAAaN,EAAQM,cAEtBrC,KAAKF,MAAMwC,OAAOH,EAAO,CACxBrB,QAASA,IAAMH,IACfO,MAAON,KAGV,EAEM2B,eAAcnC,eAAAoC,EAAClC,GAIpB,OAAO,I+
AAII,QAAQ,CAACC,EAASC,KAC5BZ,KAAKF,MAAM2C,aAAa,iBAAkB,CACzC3B,QAASA,IAAMH,IACfO,MAAON,EACPO,cAAe,CACdkB,YAAa,GACbK,YAAapC,EAAQqC,YACrBC,MAAOtC,EAAQuC,YAEhBC,OAAQ,UAGX,IA9HoBrD,EAEIsD,UAAY,uBAFhBtD,EAaLgB,kBAAiB,SAAjBA,IACd,MAAMuC,EAAaC,aAAaC,QAAQzD,EAAcs+
D,WACtD,IAAKC,EAAY,CAChB,OAAO,IACR,CACA,IACC,OAAOG,KAAKC,MAAMJ,EACnB,CAAE,MACD,OAAO,IACR,CACD,EAvBoBvD,EAyBLuB,kBAAiB,SAAjBA,EAAkBqC,GAChCJ,aAAaK,QAAQ7D,EAAcsD,UAAWI,KAAKI,UAAUF,GAC9D,EAAC,OA3BmB5D,CAAa","ignoreList":[]}                                   