sap.ui.define(["sap/m/TabContainerItem","sap/m/VBox","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","./APC.controller","./BaseController","./OData.controller"],function(t,e,n,o,i,r,a){"use strict";function s(t){return t&&t.__esModule&&typeof t.defa+
ult!=="undefined"?t.default:t}const l=s(i);const d=s(r);const c=s(a);const g=d.extend("de.kernich.odpu.controller.Main",{constructor:function t(){d.prototype.constructor.apply(this,arguments);this.controllerMap=new Map},onTabContainerAddNewButtonPress:fu+
nction t(){void this.handleAddNewButtonPress()},onTabContainerItemClose:function t(){},onInit:function t(){d.prototype.onInit.call(this);void this.handleInit()},handleInit:async function n(){const o=this.getTabContainer();const i=new t({name:this.getOwne+
rComponent().getText("app.untitled"),additionalText:"ODATA",modified:false});const r="__"+(new Date).getTime().toString();const[a,s]=await Promise.all([this.loadInfo(),this.createODataControllerAndFragment(r)]);const l=this.getControllerById(r);l.getView+
=()=>s;i.addContent(new e({items:s,renderType:"Bare",fitContainer:true,height:"100%"}));o.addItem(i);l.onInit();l.setTitle=t=>{i.setName(t)};this.setSelectedItem(i)},createODataControllerAndFragment:async function t(e){const o=new c(e);o.component=this.g+
etOwnerComponent();o.getOwnerComponent=()=>this.getOwnerComponent();o.fragmentId=e;this.setControllerById(e,o);return n.load({name:"de.kernich.odpu.view.fragments.ODATA.Main",controller:o,id:e})},setControllerById:function t(e,n){this.controllerMap.set(e+
,n)},getControllerById:function t(e){return this.controllerMap.get(e)},loadInfo:async function t(){this.setBusy(true);try{const t=await this.getOwnerComponent().requests.getInfo();this.getOwnerComponent().setModel(new o(t),"info");if(t.UpdateAvailable){v+
oid this.getOwnerComponent().dialogManager.showUpdateAvailableDialog()}}finally{this.setBusy(false)}},setSelectedItem:function t(e){while(this.getTabContainer().getSelectedItem()!==e.getId()){this.getTabContainer().setSelectedItem(e)}},handleAddNewButton+
Press:async function n(){const o=await this.getOwnerComponent().dialogManager.selectProjectType();const i=this.getTabContainer();const r=new t({name:this.getOwnerComponent().getText("app.untitled"),additionalText:o,modified:false});const a="__"+(new Date+
).getTime().toString();i.addItem(r);try{let t;let n;if(o==="ODATA"){t=await this.createODataControllerAndFragment(a);n=this.getControllerById(a)}else if(o==="APC"){t=await this.createAPCControllerAndFragment(a);n=this.getControllerById(a)}n.getView=()=>t+
;r.addContent(new e({items:t,renderType:"Bare",fitContainer:true,height:"100%"}));n.onInit();n.setTitle=t=>{r.setName(t)};i.setSelectedItem(r)}catch(t){i.removeItem(r);throw t}},createAPCControllerAndFragment:async function t(e){const o=new l(e);o.compon+
ent=this.getOwnerComponent();o.getOwnerComponent=()=>this.getOwnerComponent();o.fragmentId=e;this.setControllerById(e,o);return n.load({name:"de.kernich.odpu.view.fragments.APC.Main",controller:o,id:e})},getTabContainer:function t(){return this.getView()+
?.byId("idTabContainer")}});return g});                                                                                                                                                                                                                        
//# sourceMappingURL=Main.controller.js.map                                                                                                                                                                                                                    