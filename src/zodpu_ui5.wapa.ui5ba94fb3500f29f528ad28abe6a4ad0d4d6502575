{"version":3,"file":"ODataRequests-dbg.js","names":["Constants","_interopRequireDefault","__Constants","ODataRequests","ManagedObject","extend","constructor","_constructor","model","ManagedObject.prototype.constructor.call","getModel","_getModel","getSer+
vices","_getServices","options","refresh","cachedServices","getCachedServices","Promise","resolve","reject","read","success","data","setCachedServices","results","error","urlParameters","$top","SERVICE_QUERY_LIMIT","toString","getInfo","_getInfo","getPus+
hChannels","_getPushChannels","getProjects","_getProjects","createProject","_createProject","project","create","deleteProject","_deleteProject","sPath","createKey","ProjectName","remove","markAsFavorite","_markAsFavorite","callFunction","ServicePath","se+
rvicePath","Value","isFavorite","method","CACHE_KEY","cachedData","localStorage","getItem","JSON","parse","services","setItem","stringify"],"sources":["ODataRequests.ts"],"sourcesContent":["import ManagedObject from \"sap/ui/base/ManagedObject\";\nimport+
 Constants from \"../Constants\";\nimport { InfoEntity, Project, PushChannelEntity, ServiceEntity } from \"../Types\";\nimport ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\n\n/**\n * @namespace de.kernich.odpu.util\n */\nexport default class ODa+
taRequests extends ManagedObject {\n\tprivate model: ODataModel;\n\tprivate static readonly CACHE_KEY = \"odpu_cached_services\";\n\n\tconstructor(model: ODataModel) {\n\t\tsuper();\n\t\tthis.model = model;\n\t}\n\n\tpublic getModel(): ODataModel {\n\t\t+
return this.model;\n\t}\n\n\tprivate static getCachedServices(): ServiceEntity[] | null {\n\t\tconst cachedData = localStorage.getItem(ODataRequests.CACHE_KEY);\n\t\tif (!cachedData) {\n\t\t\treturn null;\n\t\t}\n\t\ttry {\n\t\t\treturn JSON.parse(cached+
Data) as ServiceEntity[];\n\t\t} catch {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tprivate static setCachedServices(services: ServiceEntity[]): void {\n\t\tlocalStorage.setItem(ODataRequests.CACHE_KEY, JSON.stringify(services));\n\t}\n\n\tasync getServices(op+
tions: { refresh: boolean } = { refresh: false }): Promise<ServiceEntity[]> {\n\t\tif (!options.refresh) {\n\t\t\tconst cachedServices = ODataRequests.getCachedServices();\n\t\t\tif (cachedServices) {\n\t\t\t\treturn cachedServices;\n\t\t\t}\n\t\t}\n\n\t+
\treturn new Promise((resolve, reject) => {\n\t\t\tthis.model.read(\"/ODataService\", {\n\t\t\t\tsuccess: (data: { results: ServiceEntity[] }) => {\n\t\t\t\t\tODataRequests.setCachedServices(data.results);\n\t\t\t\t\tresolve(data.results);\n\t\t\t\t},\n\+
t\t\t\terror: reject,\n\t\t\t\turlParameters: {\n\t\t\t\t\t$top: Constants.SERVICE_QUERY_LIMIT.toString(),\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tasync getInfo(): Promise<InfoEntity> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.model.r+
ead(\"/Info\", {\n\t\t\t\tsuccess: (data: { results: InfoEntity[] }) => {\n\t\t\t\t\tresolve(data.results[0]);\n\t\t\t\t},\n\t\t\t\terror: reject,\n\t\t\t});\n\t\t});\n\t}\n\n\tasync getPushChannels(): Promise<PushChannelEntity[]> {\n\t\treturn new Promi+
se((resolve, reject) => {\n\t\t\tthis.model.read(\"/PushChannel\", {\n\t\t\t\tsuccess: (data: { results: PushChannelEntity[] }) => {\n\t\t\t\t\tresolve(data.results);\n\t\t\t\t},\n\t\t\t\terror: reject,\n\t\t\t\turlParameters: {\n\t\t\t\t\t$top: Constant+
s.SERVICE_QUERY_LIMIT.toString(),\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tasync getProjects(): Promise<Project[]> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.model.read(\"/ODataServiceProject\", {\n\t\t\t\tsuccess: (data: { \n\t\t\t\t\+
tresults: Project[]\n\t\t\t\t}) => {\n\t\t\t\t\tresolve(data.results as unknown as Project[]);\n\t\t\t\t},\n\t\t\t\terror: reject,\n\t\t\t});\n\t\t});\n\t}\n\n\tasync createProject(project: Project): Promise<void> {\n\t\treturn new Promise((resolve, reje+
ct) => {\n\t\t\tthis.model.create(\"/ODataServiceProject\", project, {\n\t\t\t\tsuccess: () => resolve(),\n\t\t\t\terror: reject\n\t\t\t});\n\t\t});\n\t}\n\t\n\tasync deleteProject(project: Project): Promise<void> {\n\t\treturn new Promise((resolve, reje+
ct) => {\n\t\t\tconst sPath = this.model.createKey(\"/ODataServiceProject\", {\n\t\t\t\tProjectName: project.ProjectName\n\t\t\t});\n\t\t\tthis.model.remove(sPath, {\n\t\t\t\tsuccess: () => resolve(),\n\t\t\t\terror: reject\n\t\t\t});\n\t\t});\n\t}\n\n\t+
async markAsFavorite(options: {\n\t\tservicePath: string;\n\t\tisFavorite: boolean;\n\t}): Promise<void> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.model.callFunction(\"/mark_favorite\", {\n\t\t\t\tsuccess: () => resolve(),\n\t\t\t\terr+
or: reject,\n\t\t\t\turlParameters: {\n\t\t\t\t\tProjectName: \"\",\n\t\t\t\t\tServicePath: options.servicePath,\n\t\t\t\t\tValue: options.isFavorite,\n\t\t\t\t},\n\t\t\t\tmethod: \"POST\",\n\t\t\t});\n\t\t});\n\t}\n}\n"],"mappings":";;;;;;QACOA,SAAS,GAA+
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","ignoreList":[]}                                                                              