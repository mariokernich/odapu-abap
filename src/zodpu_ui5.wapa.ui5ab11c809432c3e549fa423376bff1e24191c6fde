sap.ui.define(["./BaseController", "sap/m/TabContainerItem", "sap/ui/core/Fragment", "./OData.controller", "sap/m/VBox", "./APC.controller", "sap/ui/model/json/JSONModel"], function (__BaseController, TabContainerItem, Fragment, __OData, VBox, __APC, JSO+
NModel) {                                                                                                                                                                                                                                                      
  "use strict";                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
  function _interopRequireDefault(obj) {                                                                                                                                                                                                                       
    return obj && obj.__esModule && typeof obj.default !== "undefined" ? obj.default : obj;                                                                                                                                                                    
  }                                                                                                                                                                                                                                                            
  const BaseController = _interopRequireDefault(__BaseController);                                                                                                                                                                                             
  const OData = _interopRequireDefault(__OData);                                                                                                                                                                                                               
  const APC = _interopRequireDefault(__APC);                                                                                                                                                                                                                   
  /**                                                                                                                                                                                                                                                          
   * @namespace de.kernich.odpu.controller                                                                                                                                                                                                                     
   */                                                                                                                                                                                                                                                          
  const Main = BaseController.extend("de.kernich.odpu.controller.Main", {                                                                                                                                                                                      
    onTabContainerAddNewButtonPress: function _onTabContainerAddNewButtonPress() {                                                                                                                                                                             
      void this.handleAddNewButtonPress();                                                                                                                                                                                                                     
    },                                                                                                                                                                                                                                                         
    onTabContainerItemClose: function _onTabContainerItemClose() {},                                                                                                                                                                                           
    onInit: function _onInit() {                                                                                                                                                                                                                               
      BaseController.prototype.onInit.call(this);                                                                                                                                                                                                              
      void this.handleInit();                                                                                                                                                                                                                                  
    },                                                                                                                                                                                                                                                         
    handleInit: async function _handleInit() {                                                                                                                                                                                                                 
      const tabContainer = this.getTabContainer();                                                                                                                                                                                                             
      await this.loadInfo();                                                                                                                                                                                                                                   
      const item = new TabContainerItem({                                                                                                                                                                                                                      
        name: this.getOwnerComponent().getText("app.untitled"),                                                                                                                                                                                                
        additionalText: "ODATA",                                                                                                                                                                                                                               
        modified: false                                                                                                                                                                                                                                        
      });                                                                                                                                                                                                                                                      
      const id = "__" + new Date().getTime().toString();                                                                                                                                                                                                       
      const controller = new OData(id);                                                                                                                                                                                                                        
      controller.component = this.getOwnerComponent();                                                                                                                                                                                                         
      controller.getOwnerComponent = () => this.getOwnerComponent();                                                                                                                                                                                           
      controller.fragmentId = id;                                                                                                                                                                                                                              
      const fragment = await Fragment.load({                                                                                                                                                                                                                   
        name: "de.kernich.odpu.view.fragments.ODATA.Main",                                                                                                                                                                                                     
        controller: controller,                                                                                                                                                                                                                                
        id: id                                                                                                                                                                                                                                                 
      });                                                                                                                                                                                                                                                      
      controller.getView = () => fragment;                                                                                                                                                                                                                     
      item.addContent(new VBox({                                                                                                                                                                                                                               
        items: fragment,                                                                                                                                                                                                                                       
        renderType: "Bare",                                                                                                                                                                                                                                    
        fitContainer: true,                                                                                                                                                                                                                                    
        height: "100%"                                                                                                                                                                                                                                         
      }));                                                                                                                                                                                                                                                     
      tabContainer.addItem(item);                                                                                                                                                                                                                              
      controller.onInit();                                                                                                                                                                                                                                     
      controller.setTitle = title => {                                                                                                                                                                                                                         
        item.setName(title);                                                                                                                                                                                                                                   
      };                                                                                                                                                                                                                                                       
      this.setSelectedItem(item);                                                                                                                                                                                                                              
    },                                                                                                                                                                                                                                                         
    loadInfo: async function _loadInfo() {                                                                                                                                                                                                                     
      this.setBusy(true);                                                                                                                                                                                                                                      
      try {                                                                                                                                                                                                                                                    
        const info = await this.getOwnerComponent().requests.getInfo();                                                                                                                                                                                        
        this.getOwnerComponent().setModel(new JSONModel(info), "info");                                                                                                                                                                                        
        if (info.UpdateAvailable) {                                                                                                                                                                                                                            
          void this.getOwnerComponent().dialogManager.showUpdateAvailableDialog();                                                                                                                                                                             
        }                                                                                                                                                                                                                                                      
      } finally {                                                                                                                                                                                                                                              
        this.setBusy(false);                                                                                                                                                                                                                                   
      }                                                                                                                                                                                                                                                        
    },                                                                                                                                                                                                                                                         
    setSelectedItem: function _setSelectedItem(item) {                                                                                                                                                                                                         
      while (this.getTabContainer().getSelectedItem() !== item.getId()) {                                                                                                                                                                                      
        this.getTabContainer().setSelectedItem(item);                                                                                                                                                                                                          
      }                                                                                                                                                                                                                                                        
    },                                                                                                                                                                                                                                                         
    handleAddNewButtonPress: async function _handleAddNewButtonPress() {                                                                                                                                                                                       
      const projectType = await this.getOwnerComponent().dialogManager.selectProjectType();                                                                                                                                                                    
      const tabContainer = this.getTabContainer();                                                                                                                                                                                                             
      const item = new TabContainerItem({                                                                                                                                                                                                                      
        name: this.getOwnerComponent().getText("app.untitled"),                                                                                                                                                                                                
        additionalText: projectType,                                                                                                                                                                                                                           
        modified: false                                                                                                                                                                                                                                        
      });                                                                                                                                                                                                                                                      
      const id = "__" + new Date().getTime().toString();                                                                                                                                                                                                       
      if (projectType === "ODATA") {                                                                                                                                                                                                                           
        const controller = new OData(id);                                                                                                                                                                                                                      
        controller.component = this.getOwnerComponent();                                                                                                                                                                                                       
        controller.getOwnerComponent = () => this.getOwnerComponent();                                                                                                                                                                                         
        controller.fragmentId = id;                                                                                                                                                                                                                            
        const fragment = await Fragment.load({                                                                                                                                                                                                                 
          name: "de.kernich.odpu.view.fragments.ODATA.Main",                                                                                                                                                                                                   
          controller: controller,                                                                                                                                                                                                                              
          id: id                                                                                                                                                                                                                                               
        });                                                                                                                                                                                                                                                    
        controller.getView = () => fragment;                                                                                                                                                                                                                   
        item.addContent(new VBox({                                                                                                                                                                                                                             
          items: fragment,                                                                                                                                                                                                                                     
          renderType: "Bare",                                                                                                                                                                                                                                  
          fitContainer: true,                                                                                                                                                                                                                                  
          height: "100%"                                                                                                                                                                                                                                       
        }));                                                                                                                                                                                                                                                   
        tabContainer.addItem(item);                                                                                                                                                                                                                            
        controller.onInit();                                                                                                                                                                                                                                   
        controller.setTitle = title => {                                                                                                                                                                                                                       
          item.setName(title);                                                                                                                                                                                                                                 
        };                                                                                                                                                                                                                                                     
        tabContainer.setSelectedItem(item);                                                                                                                                                                                                                    
      }                                                                                                                                                                                                                                                        
      if (projectType === "APC") {                                                                                                                                                                                                                             
        const controller = new APC(id);                                                                                                                                                                                                                        
        controller.component = this.getOwnerComponent();                                                                                                                                                                                                       
        controller.getOwnerComponent = () => this.getOwnerComponent();                                                                                                                                                                                         
        controller.fragmentId = id;                                                                                                                                                                                                                            
        const fragment = await Fragment.load({                                                                                                                                                                                                                 
          name: "de.kernich.odpu.view.fragments.APC.Main",                                                                                                                                                                                                     
          controller: controller,                                                                                                                                                                                                                              
          id: id                                                                                                                                                                                                                                               
        });                                                                                                                                                                                                                                                    
        tabContainer.addItem(item);                                                                                                                                                                                                                            
        controller.getView = () => fragment;                                                                                                                                                                                                                   
        controller.onInit();                                                                                                                                                                                                                                   
        item.addContent(new VBox({                                                                                                                                                                                                                             
          items: fragment,                                                                                                                                                                                                                                     
          renderType: "Bare",                                                                                                                                                                                                                                  
          fitContainer: true,                                                                                                                                                                                                                                  
          height: "100%"                                                                                                                                                                                                                                       
        }));                                                                                                                                                                                                                                                   
        controller.setTitle = title => {                                                                                                                                                                                                                       
          item.setName(title);                                                                                                                                                                                                                                 
        };                                                                                                                                                                                                                                                     
        this.setSelectedItem(item);                                                                                                                                                                                                                            
      }                                                                                                                                                                                                                                                        
    },                                                                                                                                                                                                                                                         
    getTabContainer: function _getTabContainer() {                                                                                                                                                                                                             
      return this.getView()?.byId("idTabContainer");                                                                                                                                                                                                           
    }                                                                                                                                                                                                                                                          
  });                                                                                                                                                                                                                                                          
  return Main;                                                                                                                                                                                                                                                 
});                                                                                                                                                                                                                                                            
//# sourceMappingURL=Main-dbg.controller.js.map                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               