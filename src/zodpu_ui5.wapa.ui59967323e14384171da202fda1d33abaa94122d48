{"version":3,"file":"PickServiceDialogController-dbg.js","names":["DialogController","_interopRequireDefault","__DialogController","PickServiceDialogController","extend","constructor","prototype","apply","arguments","data","services","odataTypes","key","+
text","searchQuery","selectedODataType","selectedService","onSearch","_onSearch","event","query","getParameter","toLowerCase","table","getElement","binding","getBinding","filter","Filter","filters","FilterOperator","Contains","and","filteredLength","getL+
ength","dialog","setTitle","onODataTypeChange","_onODataTypeChange","selectedKey","getKey","applyFilters","onRefresh","_onRefresh","handleRefresh","_handleRefresh","model","getModel","requests","getServices","setProperty","MessageToast","show","getText",+
"onChoose","_onChoose","selectedItem","getSelectedItem","bindingContext","getBindingContext","service","getObject","onConfirm","onCustomService","_onCustomService","dialogManager","pickCustomService","_applyFilters","push","EQ","length","onFavorite","_on+
Favorite","isFavorite","getSource","handleFavorite","_handleFavorite","setBusy","markAsFavorite","servicePath","ServicePath"],"sources":["PickServiceDialogController.ts"],"sourcesContent":["import DialogController from \"../../util/DialogController\";\ni+
mport { ServiceEntity } from \"../../Types\";\nimport { SearchField$LiveChangeEvent } from \"sap/m/SearchField\";\nimport { Select$ChangeEvent } from \"sap/m/Select\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/mode+
l/FilterOperator\";\nimport ListBinding from \"sap/ui/model/ListBinding\";\nimport Table from \"sap/m/Table\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport Context from \"sap/ui/model/odata/v2/Context\";\nimport JSONModel from \"sap/ui/model+
/json/JSONModel\";\nimport { Button$PressEvent } from \"sap/m/Button\";\n\n/**\n * @namespace de.kernich.odpu.controller.dialog\n */\nexport default class PickServiceDialogController extends DialogController {\n\tdata = {\n\t\tservices: [] as ServiceEnti+
ty[],\n\t\todataTypes: [\n\t\t\t{ key: \"ALL\", text: \"All\" },\n\t\t\t{ key: \"2\", text: \"2\" },\n\t\t\t{ key: \"4\", text: \"4\" },\n\t\t],\n\t\tsearchQuery: \"\",\n\t\tselectedODataType: \"ALL\",\n\t\tselectedService: null as ServiceEntity | null,\+
n\t};\n\n\tonSearch(event: SearchField$LiveChangeEvent) {\n\t\tconst query = event.getParameter(\"newValue\")?.toLowerCase() ?? \"\";\n\t\tconst table = this.getElement<Table>(\"idServicesTable\");\n\t\tconst binding = table.getBinding(\"items\") as List+
Binding;\n\n\t\tbinding.filter(\n\t\t\tquery\n\t\t\t\t? new Filter({\n\t\t\t\t\t\tfilters: [\n\t\t\t\t\t\t\tnew Filter(\"ServiceName\", FilterOperator.Contains, query),\n\t\t\t\t\t\t\tnew Filter(\"ServicePath\", FilterOperator.Contains, query),\n\t\t\t\t+
\t\t],\n\t\t\t\t\t\tand: false,\n\t\t\t\t  })\n\t\t\t\t: []\n\t\t);\n\n\t\tconst filteredLength = binding ? binding.getLength() : 0;\n\t\tthis.dialog.setTitle(`Select Service (${filteredLength})`);\n\t}\n\n\tonODataTypeChange(event: Select$ChangeEvent) {+
\n\t\tconst selectedKey = event.getParameter(\"selectedItem\")?.getKey() ?? \"ALL\";\n\t\tthis.data.selectedODataType = selectedKey;\n\t\tthis.applyFilters();\n\t}\n\n\tonRefresh() {\n\t\tvoid this.handleRefresh();\n\t}\n\n\tasync handleRefresh() {\n\t\t+
const model = this.getModel(\"dialog\") as JSONModel;\n\t\tconst services = await this.requests.getServices();\n\t\tmodel.setProperty(\"/services\", services);\n\t\tMessageToast.show(this.getText(\"msg.servicesRefreshed\"));\n\t}\n\n\tonChoose() {\n\t\tc+
onst table = this.getElement<Table>(\"idServicesTable\");\n\t\tconst selectedItem = table.getSelectedItem();\n\n\t\tif (!selectedItem) {\n\t\t\tMessageToast.show(this.getText(\"msg.selectService\"));\n\t\t\treturn;\n\t\t}\n\n\t\tconst bindingContext = se+
lectedItem.getBindingContext(\"dialog\") as Context;\n\t\tconst service = bindingContext.getObject() as ServiceEntity;\n\t\tthis.data.selectedService = service;\n\t\tthis.onConfirm();\n\t}\n\n\tasync onCustomService() {\n\t\ttry {\n\t\t\tconst service = +
await this.dialogManager.pickCustomService();\n\t\t\tthis.data.selectedService = service;\n\t\t\tthis.onConfirm();\n\t\t} catch {\n\t\t\t// Ignore error as it's handled in pickCustomService\n\t\t}\n\t}\n\n\tprivate applyFilters() {\n\t\tconst table = thi+
s.getElement<Table>(\"idServicesTable\");\n\t\tconst binding = table.getBinding(\"items\") as ListBinding;\n\t\tconst filters: Filter[] = [];\n\n\t\t// Add search filter if query exists\n\t\tif (this.data.searchQuery) {\n\t\t\tfilters.push(\n\t\t\t\tnew +
Filter(\n\t\t\t\t\t\"ServiceName\",\n\t\t\t\t\tFilterOperator.Contains,\n\t\t\t\t\tthis.data.searchQuery\n\t\t\t\t),\n\t\t\t\tnew Filter(\n\t\t\t\t\t\"ServicePath\",\n\t\t\t\t\tFilterOperator.Contains,\n\t\t\t\t\tthis.data.searchQuery\n\t\t\t\t)\n\t\t\t)+
;\n\t\t}\n\n\t\t// Add OData type filter if not ALL\n\t\tif (this.data.selectedODataType !== \"ALL\") {\n\t\t\tfilters.push(\n\t\t\t\tnew Filter(\"ODataType\", FilterOperator.EQ, this.data.selectedODataType)\n\t\t\t);\n\t\t}\n\n\t\t// Apply combined filt+
ers\n\t\tbinding.filter(\n\t\t\tfilters.length > 0 ? new Filter({ filters: filters, and: true }) : []\n\t\t);\n\n\t\tconst filteredLength = binding ? binding.getLength() : 0;\n\t\tthis.dialog.setTitle(`Select Service (${filteredLength})`);\n\t}\n\n\tonFa+
vorite(isFavorite: boolean, event: Button$PressEvent) {\n\t\tconst binding = event.getSource().getBindingContext(\"dialog\") as Context;\n\t\tconst service = binding.getObject() as ServiceEntity;\n\t\tvoid this.handleFavorite(service, isFavorite);\n\t}\n+
\n\tasync handleFavorite(service: ServiceEntity, isFavorite: boolean) {\n\t\tthis.dialog.setBusy(true);\n\t\ttry {\n\t\t\tawait this.requests.markAsFavorite({\n\t\t\t\tservicePath: service.ServicePath,\n\t\t\t\tisFavorite: isFavorite,\n\t\t\t});\n\t\t\ta+
wait this.handleRefresh();\n\t\t} finally {\n\t\t\tthis.dialog.setBusy(false);\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}                                                                                                  