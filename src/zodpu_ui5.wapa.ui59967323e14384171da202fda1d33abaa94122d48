{"version":3,"file":"PickServiceDialogController-dbg.js","names":["DialogController","_interopRequireDefault","__DialogController","PickServiceDialogController","extend","constructor","prototype","apply","arguments","data","services","odataTypes","search+
Query","selectedODataType","selectedService","onInit","_onInit","key","text","getText","handleInit","_handleInit","dialog","setBusy","requests","getServices","model","getModel","setProperty","setTitle","length","onSearch","_onSearch","event","query","get+
Parameter","toLowerCase","table","getElement","binding","getBinding","filter","Filter","filters","FilterOperator","Contains","and","filteredLength","getLength","onODataTypeChange","_onODataTypeChange","selectedKey","getKey","applyFilters","onRefresh","_o+
nRefresh","handleRefresh","_handleRefresh","refresh","MessageToast","show","onChoose","_onChoose","selectedItem","getSelectedItem","bindingContext","getBindingContext","service","getObject","onConfirm","onCustomService","_onCustomService","dialogManager"+
,"pickCustomService","_applyFilters","push","EQ","onFavorite","_onFavorite","isFavorite","getSource","handleFavorite","_handleFavorite","markAsFavorite","servicePath","ServicePath"],"sources":["PickServiceDialogController.ts"],"sourcesContent":["import D+
ialogController from \"../../util/DialogController\";\nimport { ServiceEntity } from \"../../Types\";\nimport { SearchField$LiveChangeEvent } from \"sap/m/SearchField\";\nimport { Select$ChangeEvent } from \"sap/m/Select\";\nimport Filter from \"sap/ui/m+
odel/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport ListBinding from \"sap/ui/model/ListBinding\";\nimport Table from \"sap/m/Table\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport Context from \"sap/ui/model/o+
data/v2/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport { Button$PressEvent } from \"sap/m/Button\";\n\n/**\n * @namespace de.kernich.odpu.controller.dialog\n */\nexport default class PickServiceDialogController extends DialogC+
ontroller {\n\tdata = {\n\t\tservices: [] as ServiceEntity[],\n\t\todataTypes: [] as { key: string; text: string }[],\n\t\tsearchQuery: \"\",\n\t\tselectedODataType: \"ALL\",\n\t\tselectedService: null as ServiceEntity | null,\n\t};\n\n\tonInit() {\n\t\t+
this.data.odataTypes = [\n\t\t\t{ key: \"ALL\", text: this.getText(\"lbl.all\") },\n\t\t\t{ key: \"2\", text: \"2\" },\n\t\t\t{ key: \"4\", text: \"4\" },\n\t\t];\n\t\tvoid this.handleInit();\n\t}\n\n\tprivate async handleInit() {\n\t\tthis.dialog.setBus+
y(true);\n\t\ttry {\n\t\t\tconst services = await this.requests.getServices();\n\t\t\tconst model = this.getModel(\"dialog\") as JSONModel;\n\t\t\tmodel.setProperty(\"/services\", services);\n\t\t\tthis.dialog.setTitle(this.getText(\"dlg.title.selectServ+
ice\") + ` (${services.length})`);\n\t\t} finally {\n\t\t\tthis.dialog.setBusy(false);\n\t\t}\n\t}\n\n\tonSearch(event: SearchField$LiveChangeEvent) {\n\t\tconst query = event.getParameter(\"newValue\")?.toLowerCase() ?? \"\";\n\t\tconst table = this.get+
Element<Table>(\"idServicesTable\");\n\t\tconst binding = table.getBinding(\"items\") as ListBinding;\n\n\t\tbinding.filter(\n\t\t\tquery\n\t\t\t\t? new Filter({\n\t\t\t\t\t\tfilters: [\n\t\t\t\t\t\t\tnew Filter(\"ServiceName\", FilterOperator.Contains, +
query),\n\t\t\t\t\t\t\tnew Filter(\"ServicePath\", FilterOperator.Contains, query),\n\t\t\t\t\t\t],\n\t\t\t\t\t\tand: false,\n\t\t\t\t  })\n\t\t\t\t: []\n\t\t);\n\n\t\tconst filteredLength = binding ? binding.getLength() : 0;\n\t\tthis.dialog.setTitle(th+
is.getText(\"dlg.title.selectService\") + ` (${filteredLength})`);\n\t}\n\n\tonODataTypeChange(event: Select$ChangeEvent) {\n\t\tconst selectedKey = event.getParameter(\"selectedItem\")?.getKey() ?? \"ALL\";\n\t\tthis.data.selectedODataType = selectedKey+
;\n\t\tthis.applyFilters();\n\t}\n\n\tonRefresh() {\n\t\tvoid this.handleRefresh();\n\t}\n\n\tasync handleRefresh() {\n\t\tthis.dialog.setBusy(true);\n\t\ttry {\n\t\t\tconst model = this.getModel(\"dialog\") as JSONModel;\n\t\t\tconst services = await th+
is.requests.getServices({ refresh: true });\n\t\t\tmodel.setProperty(\"/services\", services);\n\t\t\tMessageToast.show(this.getText(\"msg.servicesRefreshed\"));\n\t\t} finally {\n\t\t\tthis.dialog.setBusy(false);\n\t\t}\n\t}\n\n\tonChoose() {\n\t\tconst+
 table = this.getElement<Table>(\"idServicesTable\");\n\t\tconst selectedItem = table.getSelectedItem();\n\n\t\tif (!selectedItem) {\n\t\t\tMessageToast.show(this.getText(\"msg.selectService\"));\n\t\t\treturn;\n\t\t}\n\n\t\tconst bindingContext = select+
edItem.getBindingContext(\"dialog\") as Context;\n\t\tconst service = bindingContext.getObject() as ServiceEntity;\n\t\tthis.data.selectedService = service;\n\t\tthis.onConfirm();\n\t}\n\n\tasync onCustomService() {\n\t\ttry {\n\t\t\tconst service = awai+
t this.dialogManager.pickCustomService();\n\t\t\tthis.data.selectedService = service;\n\t\t\tthis.onConfirm();\n\t\t} catch {\n\t\t\t// Ignore error as it's handled in pickCustomService\n\t\t}\n\t}\n\n\tprivate applyFilters() {\n\t\tconst table = this.ge+
tElement<Table>(\"idServicesTable\");\n\t\tconst binding = table.getBinding(\"items\") as ListBinding;\n\t\tconst filters: Filter[] = [];\n\n\t\t// Add search filter if query exists\n\t\tif (this.data.searchQuery) {\n\t\t\tfilters.push(\n\t\t\t\tnew Filt+
er(\n\t\t\t\t\t\"ServiceName\",\n\t\t\t\t\tFilterOperator.Contains,\n\t\t\t\t\tthis.data.searchQuery\n\t\t\t\t),\n\t\t\t\tnew Filter(\n\t\t\t\t\t\"ServicePath\",\n\t\t\t\t\tFilterOperator.Contains,\n\t\t\t\t\tthis.data.searchQuery\n\t\t\t\t)\n\t\t\t);\n\+
t\t}\n\n\t\t// Add OData type filter if not ALL\n\t\tif (this.data.selectedODataType !== \"ALL\") {\n\t\t\tfilters.push(\n\t\t\t\tnew Filter(\"ODataType\", FilterOperator.EQ, this.data.selectedODataType)\n\t\t\t);\n\t\t}\n\n\t\t// Apply combined filters\+
n\t\tbinding.filter(\n\t\t\tfilters.length > 0 ? new Filter({ filters: filters, and: true }) : []\n\t\t);\n\n\t\tconst filteredLength = binding ? binding.getLength() : 0;\n\t\tthis.dialog.setTitle(this.getText(\"dlg.title.selectService\") + ` (${filtered+
Length})`);\n\t}\n\n\tonFavorite(isFavorite: boolean, event: Button$PressEvent) {\n\t\tconst binding = event.getSource().getBindingContext(\"dialog\") as Context;\n\t\tconst service = binding.getObject() as ServiceEntity;\n\t\tvoid this.handleFavorite(se+
rvice, isFavorite);\n\t}\n\n\tasync handleFavorite(service: ServiceEntity, isFavorite: boolean) {\n\t\tthis.dialog.setBusy(true);\n\t\ttry {\n\t\t\tawait this.requests.markAsFavorite({\n\t\t\t\tservicePath: service.ServicePath,\n\t\t\t\tisFavorite: isFav+
orite,\n\t\t\t});\n\t\t\tawait this.handleRefresh();\n\t\t} finally {\n\t\t\tthis.dialog.setBusy(false);\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}               