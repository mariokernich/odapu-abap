sap.ui.define(["../../util/DialogController","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageToast"],function(e,t,s,i){"use strict";function a(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const n=a(e);const o=n.+
extend("de.kernich.odpu.controller.dialog.PickServiceDialogController",{constructor:function e(){n.prototype.constructor.apply(this,arguments);this.data={services:[],odataTypes:[],searchQuery:"",selectedODataType:"ALL",selectedService:null}},onInit:funct+
ion e(){this.data.odataTypes=[{key:"ALL",text:this.getText("lbl.all")},{key:"2",text:"2"},{key:"4",text:"4"}];void this.handleInit()},handleInit:async function e(){this.dialog.setBusy(true);try{const e=await this.requests.getServices();const t=this.getMo+
del("dialog");t.setProperty("/services",e);this.dialog.setTitle(this.getText("dlg.title.selectService")+` (${e.length})`)}finally{this.dialog.setBusy(false)}},onSearch:function e(i){const a=i.getParameter("newValue")?.toLowerCase()??"";const n=this.getEl+
ement("idServicesTable");const o=n.getBinding("items");o.filter(a?new t({filters:[new t("ServiceName",s.Contains,a),new t("ServicePath",s.Contains,a)],and:false}):[]);const r=o?o.getLength():0;this.dialog.setTitle(this.getText("dlg.title.selectService")++
` (${r})`)},onODataTypeChange:function e(t){const s=t.getParameter("selectedItem")?.getKey()??"ALL";this.data.selectedODataType=s;this.applyFilters()},onRefresh:function e(){void this.handleRefresh()},handleRefresh:async function e(){this.dialog.setBusy(+
true);try{const e=this.getModel("dialog");const t=await this.requests.getServices({refresh:true});e.setProperty("/services",t);i.show(this.getText("msg.servicesRefreshed"))}finally{this.dialog.setBusy(false)}},onChoose:function e(){const t=this.getElemen+
t("idServicesTable");const s=t.getSelectedItem();if(!s){i.show(this.getText("msg.selectService"));return}const a=s.getBindingContext("dialog");const n=a.getObject();this.data.selectedService=n;this.onConfirm()},onCustomService:async function e(){try{cons+
t e=await this.dialogManager.pickCustomService();this.data.selectedService=e;this.onConfirm()}catch{}},applyFilters:function e(){const i=this.getElement("idServicesTable");const a=i.getBinding("items");const n=[];if(this.data.searchQuery){n.push(new t("S+
erviceName",s.Contains,this.data.searchQuery),new t("ServicePath",s.Contains,this.data.searchQuery))}if(this.data.selectedODataType!=="ALL"){n.push(new t("ODataType",s.EQ,this.data.selectedODataType))}a.filter(n.length>0?new t({filters:n,and:true}):[]);c+
onst o=a?a.getLength():0;this.dialog.setTitle(this.getText("dlg.title.selectService")+` (${o})`)},onFavorite:function e(t,s){const i=s.getSource().getBindingContext("dialog");const a=i.getObject();void this.handleFavorite(a,t)},handleFavorite:async funct+
ion e(t,s){this.dialog.setBusy(true);try{await this.requests.markAsFavorite({servicePath:t.ServicePath,isFavorite:s});await this.handleRefresh()}finally{this.dialog.setBusy(false)}}});return o});                                                            
//# sourceMappingURL=PickServiceDialogController.js.map                                                                                                                                                                                                        